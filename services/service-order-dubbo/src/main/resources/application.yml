server:
  port: 8001

demo:
  tracing:
    enabled: ${DEMO_TRACING_ENABLED:false}

logging:
  charset:
    console: UTF-8

spring:
  profiles:
    active: local
  application:
    name: service-order-dubbo
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: 0
  cloud:
    nacos:
      # 配置 Nacos 地址
      server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}
      username: ${NACOS_USERNAME:nacos}
      password: ${NACOS_PASSWORD:nacos}
      discovery:
        namespace: ${NACOS_NAMESPACE:public}
        enabled: true
        username: ${NACOS_USERNAME:nacos}
        password: ${NACOS_PASSWORD:nacos}
      config:
        namespace: ${NACOS_NAMESPACE:public}
        username: ${NACOS_USERNAME:nacos}
        password: ${NACOS_PASSWORD:nacos}
        import-check:
          enabled: true

# Dubbo 配置
dubbo:
  application:
    name: service-order-dubbo
    # QOS 配置
    qos-enable: true
    qos-port: 22223
    # 启用详细日志
    logger: slf4j
  # 配置中心（用于动态配置规则）
  config-center:
    address: nacos://${NACOS_SERVER_ADDR:127.0.0.1:8848}
    username: ${NACOS_USERNAME:nacos}
    password: ${NACOS_PASSWORD:nacos}
    parameters:
      namespace: ${NACOS_NAMESPACE:public}
    group: dubbo
    timeout: 3000
    # 注意：这里不需要配置 config-file，动态配置规则会自动监听 *.configurators
    # config-file: dubbo.properties  # 可选，仅用于应用启动时的静态全局配置
  # 注册中心配置
  registry:
    address: nacos://${NACOS_SERVER_ADDR:127.0.0.1:8848}
    username: ${NACOS_USERNAME:nacos}
    password: ${NACOS_PASSWORD:nacos}
    parameters:
      namespace: ${NACOS_NAMESPACE:public}
      prefer-ip-address: true
  # 协议配置
  protocol:
    name: dubbo
    port: 20880
    host: 127.0.0.1
  # 消費者配置
  consumer:
    # 调用超时（窗口时间），单位：ms
#    timeout: 3000
#    # 失败重试次数（不包括第一次调用）
#    retries: 1
    # 不检查服务是否可用，决序启动时不会报错
    check: false
    # 负载均衡政策：random、roundrobin、leastactive，默认为random
    loadbalance: random
    # 集群模式：failover、failfast、failsafe、failback、forking
    cluster: failover
    # 禁用 ScopeClusterWrapper 以解决 group="*" 和 merger="true" 时的 NPE 问题
    parameters:
      scope-cluster-wrapper.enabled: false

---
spring:
  config:
    import:
      - nacos:common.yaml?group=order
#      - nacos:database.yaml?group=order
    activate:
      on-profile: local
#
#---
#spring:
#  config:
#    import:
#      - nacos:common.yaml?group=order
#      - nacos:database.yaml?group=order
#      - nacos:haha.yaml?group=order
#    activate:
#      on-profile: test
#
#---
#spring:
#  config:
#    import:
#      - nacos:common.yaml?group=order
#      - nacos:database.yaml?group=order
#      - nacos:hehe.yaml?group=order
#    activate:
#      on-profile: prod





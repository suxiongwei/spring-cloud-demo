﻿<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Spring Cloud DevConsole</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- 使用本地轻量级代码高亮库 -->
    <script src="js/simple-highlight.js"></script>
    <link rel='stylesheet' href='css/service-demo.css'>
    <link rel="stylesheet" href="css/result-panel.css">
    <link rel="stylesheet" href="css/utility.css">
    <style>
        [v-cloak] {
            display: none !important;
        }

        body {
            zoom: 1.2;
        }

        .control-label {
            font-size: 14px !important;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="brand">
                <span class="brand-title">Spring Cloud</span>
                <span class="brand-subtitle">开发者控制台</span>
            </div>
            <div class="status-badge">
                ENV: DEVELOPMENT
            </div>
        </header>

        <main class="container">
            <!-- 1. Microservice Panorama -->
            <section>
                <div class="section-header">
                    <h2 class="section-title">微服务全景图</h2>
                    <div class="section-line"></div>
                </div>

                <!-- Tab Navigation -->
                <div class="tabs-nav">
                    <button class="tab-item" @click="activePanoramaTab = 'control'"
                        :class="{ active: activePanoramaTab === 'control' }">控制面</button>
                    <button class="tab-item" @click="activePanoramaTab = 'governance'"
                        :class="{ active: activePanoramaTab === 'governance' }">治理面</button>
                    <button class="tab-item" @click="activePanoramaTab = 'communication'"
                        :class="{ active: activePanoramaTab === 'communication' }">通信层</button>
                    <button class="tab-item" @click="activePanoramaTab = 'gateway'"
                        :class="{ active: activePanoramaTab === 'gateway' }">网关与调度</button>
                    <button class="tab-item" @click="activePanoramaTab = 'data'"
                        :class="{ active: activePanoramaTab === 'data' }">数据与运维</button>
                </div>

                <div>
                    <!-- Control Plane Section -->
                    <div class="panorama-section" :class="{ active: activePanoramaTab === 'control' }">
                        <h3 class="category-title">控制面</h3>
                        <div class="panorama-grid">
                            <!-- Nacos -->
                            <div class="service-card" :class="{ active: activeComponent === 'nacos' }"
                                @click="selectComponent('nacos')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/nacos.png" alt="Nacos"></div>
                                    <div>
                                        <div class="card-title">Nacos</div>
                                        <div class="card-subtitle">配置管理、服务发现、服务管理</div>
                                    </div>
                                </div>
                                <div class="card-desc">⼀个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台</div>
                            </div>
                            <!-- OpenSergo -->
                            <div class="service-card" :class="{ active: activeComponent === 'opensergo' }"
                                @click="selectComponent('opensergo')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/opensergo.png" alt="OpenSergo"></div>
                                    <div>
                                        <div class="card-title">OpenSergo</div>
                                        <div class="card-subtitle">治理标准</div>
                                    </div>
                                </div>
                                <div class="card-desc">开放通用的微服务治理标准,覆盖流量治理、服务容错等。</div>
                            </div>
                        </div>
                    </div>

                    <!-- Governance Plane Section -->
                    <div class="panorama-section" :class="{ active: activePanoramaTab === 'governance' }">
                        <h3 class="category-title">治理面 - 流量控制与容错保护</h3>
                        <div class="panorama-grid">
                            <!-- Sentinel -->
                            <div class="service-card" :class="{ active: activeComponent === 'sentinel' }"
                                @click="selectComponent('sentinel')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/sentinel.png" alt="Sentinel"></div>
                                    <div>
                                        <div class="card-title">Sentinel</div>
                                        <div class="card-subtitle">流量防卫兵</div>
                                    </div>
                                </div>
                                <div class="card-desc">面向分布式服务架构的流量控制组件,提供熔断降级、系统负载保护。</div>
                            </div>
                            <!-- ChaosBlade -->
                            <div class="service-card" :class="{ active: activeComponent === 'chaosblade' }"
                                @click="selectComponent('chaosblade')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/ChaosBlade.png" alt="ChaosBlade">
                                    </div>
                                    <div>
                                        <div class="card-title">ChaosBlade</div>
                                        <div class="card-subtitle">混沌工程</div>
                                    </div>
                                </div>
                                <div class="card-desc">故障注入、混沌实验、系统韧性验证工具。</div>
                            </div>
                            <!-- AppActive -->
                            <div class="service-card" :class="{ active: activeComponent === 'appactive' }"
                                @click="selectComponent('appactive')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/appactive.svg" alt="AppActive"></div>
                                    <div>
                                        <div class="card-title">AppActive</div>
                                        <div class="card-subtitle">多活容灾</div>
                                    </div>
                                </div>
                                <div class="card-desc">应用多活架构、异地多活、容灾切换解决方案。</div>
                            </div>
                        </div>
                    </div>

                    <!-- Communication Layer Section -->
                    <div class="panorama-section" :class="{ active: activePanoramaTab === 'communication' }">
                        <h3 class="category-title">通信层 - 同步与异步通信</h3>
                        <div class="panorama-grid">
                            <!-- Dubbo -->
                            <div class="service-card" :class="{ active: activeComponent === 'dubbo' }"
                                @click="selectComponent('dubbo')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/dubbo.png" alt="Dubbo"></div>
                                    <div>
                                        <div class="card-title">Dubbo</div>
                                        <div class="card-subtitle">RPC 框架</div>
                                    </div>
                                </div>
                                <div class="card-desc">高性能、轻量级的开源 Java RPC 框架,提供面向接口的远程方法调用。</div>
                            </div>
                            <!-- Spring Cloud -->
                            <div class="service-card" :class="{ active: activeComponent === 'sca' }"
                                @click="selectComponent('sca')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/sca.svg" alt="SCA"></div>
                                    <div>
                                        <div class="card-title">Spring Cloud</div>
                                        <div class="card-subtitle">微服务标准</div>
                                    </div>
                                </div>
                                <div class="card-desc">整合 OpenFeign、LoadBalancer 等标准组件,提供一站式解决方案。</div>
                            </div>
                            <!-- RocketMQ -->
                            <div class="service-card" :class="{ active: activeComponent === 'rocketmq' }"
                                @click="selectComponent('rocketmq')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/rocketmq.svg" alt="RocketMQ"></div>
                                    <div>
                                        <div class="card-title">RocketMQ</div>
                                        <div class="card-subtitle">消息队列</div>
                                    </div>
                                </div>
                                <div class="card-desc">异步消息通信、削峰填谷、事件驱动、流式处理。</div>
                            </div>
                            <!-- Seata -->
                            <div class="service-card" :class="{ active: activeComponent === 'seata' }"
                                @click="selectComponent('seata')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/seata.png" alt="Seata"></div>
                                    <div>
                                        <div class="card-title">Seata</div>
                                        <div class="card-subtitle">分布式事务</div>
                                    </div>
                                </div>
                                <div class="card-desc">致力于提供高性能和简单易用的分布式事务服务,支持 AT、TCC、SAGA 等模式。</div>
                            </div>
                        </div>
                    </div>

                    <!-- Gateway & Scheduling Section -->
                    <div class="panorama-section" :class="{ active: activePanoramaTab === 'gateway' }">
                        <h3 class="category-title">网关与调度 - 流量入口与任务管理</h3>
                        <div class="panorama-grid">
                            <!-- Higress -->
                            <div class="service-card" :class="{ active: activeComponent === 'higress' }"
                                @click="selectComponent('higress')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/Higress.png" alt="Higress"></div>
                                    <div>
                                        <div class="card-title">Higress</div>
                                        <div class="card-subtitle">云原生网关</div>
                                    </div>
                                </div>
                                <div class="card-desc">基于 Envoy 的云原生网关,实现了流量网关、微服务网关、安全网关三合一。</div>
                            </div>
                            <!-- SchedulerX -->
                            <div class="service-card" :class="{ active: activeComponent === 'schedulerx' }"
                                @click="selectComponent('schedulerx')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/schedulerx.svg" alt="SchedulerX">
                                    </div>
                                    <div>
                                        <div class="card-title">SchedulerX</div>
                                        <div class="card-subtitle">任务调度</div>
                                    </div>
                                </div>
                                <div class="card-desc">分布式任务调度、定时任务、工作流调度、分布式计算。</div>
                            </div>
                        </div>
                    </div>

                    <!-- Data & Ops Section -->
                    <div class="panorama-section" :class="{ active: activePanoramaTab === 'data' }">
                        <h3 class="category-title">数据与运维 - 容器与可观测性</h3>
                        <div class="panorama-grid">
                            <!-- Kubernetes -->
                            <div class="service-card" :class="{ active: activeComponent === 'k8s' }"
                                @click="selectComponent('k8s')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/k8s.svg" alt="K8s"></div>
                                    <div>
                                        <div class="card-title">Kubernetes</div>
                                        <div class="card-subtitle">容器编排</div>
                                    </div>
                                </div>
                                <div class="card-desc">自动化容器的部署、扩展和管理,云原生应用的基础设施。</div>
                            </div>
                            <!-- OpenTelemetry -->
                            <div class="service-card" :class="{ active: activeComponent === 'opentelemetry' }"
                                @click="selectComponent('opentelemetry')">
                                <div class="card-header">
                                    <div class="card-icon"><img src="images/logos/opentelemetry.svg" alt="OTel"></div>
                                    <div>
                                        <div class="card-title">OpenTelemetry</div>
                                        <div class="card-subtitle">可观测性</div>
                                    </div>
                                </div>
                                <div class="card-desc">云原生可观测性标准,提供 Trace、Metric、Log 的统一采集。</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Console & Terminal -->
            <section class="console-layout-single" v-if="activeComponent && componentData[activeComponent]">
                <!-- Left: Control Panel -->
                <div class="console-panel-full panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span>⚡</span>
                            <span>{{ componentData[activeComponent].title }} 控制台</span>
                        </div>
                        <div style="display:flex; gap:8px;">
                            <a :href="componentData[activeComponent].github" target="_blank"
                                class="btn btn-sm">GitHub</a>
                            <a :href="componentData[activeComponent].website" target="_blank"
                                class="btn btn-sm">Docs</a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <!-- Sentinel Controls -->
                        <div v-if="activeComponent === 'sentinel'">
                            <div class="control-group">
                                <div class="control-label">流量控制 (QPS)</div>
                                <div class="test-description">🔹 向服务发送 N 个并发请求，观察 Sentinel
                                    是否正确限流。QPS限流基于滑动时间窗口算法，超过阈值的请求会被直接拒绝。</div>
                                <div class="input-row">
                                    <input class="input" type="number" min="1" v-model.number="qpsTimes"
                                        placeholder="次数">
                                    <button class="btn btn-primary" @click="trigger('qps', qpsTimes)"><span>▶</span>
                                        发送请求</button>
                                </div>



                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">限流阈值:</span>
                                        <span class="config-value">1000 QPS</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">当前状态:</span>
                                        <span class="config-value">✓ 正常运行</span>
                                    </div>
                                </div>

                                <!-- Result Display for QPS Test -->
                                <div class="result-display" :class="getResultDisplay('sentinel-qps')?.status"
                                    v-if="getResultDisplay('sentinel-qps')" @click="showResultDetail('sentinel-qps')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('sentinel-qps')?.status">
                                            {{ getResultDisplay('sentinel-qps')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('sentinel-qps')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('sentinel-qps')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('sentinel-qps')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('sentinel-qps')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('sentinel-qps')?.code">HTTP {{
                                            getResultDisplay('sentinel-qps')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">并发控制 (Thread)</div>
                                <div class="test-description">🔹 通过线程隔离限制最多同时执行的线程数。当线程数达到阈值，新请求进入等待队列。</div>
                                <div class="input-row">
                                    <input class="input" type="number" min="1" v-model.number="threadTimes"
                                        placeholder="线程数">
                                    <button class="btn btn-primary" @click="testThread()"><span>▶</span> 并发测试</button>
                                </div>

                                <!-- Result Display for Thread Test -->
                                <div class="result-display" :class="getResultDisplay('sentinel-thread')?.status"
                                    v-if="getResultDisplay('sentinel-thread')"
                                    @click="showResultDetail('sentinel-thread')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status"
                                            :class="getResultDisplay('sentinel-thread')?.status">
                                            {{ getResultDisplay('sentinel-thread')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('sentinel-thread')?.status === 'error' ? '✘ 失败' : '⏳ 执行中'
                                            }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('sentinel-thread')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('sentinel-thread')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('sentinel-thread')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('sentinel-thread')?.code">HTTP {{
                                            getResultDisplay('sentinel-thread')?.code }}</span>
                                    </div>
                                </div>

                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">线程数限制:</span>
                                        <span class="config-value">200</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">队列大小:</span>
                                        <span class="config-value">100</span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">热点参数限流</div>
                                <div class="test-description">🔹 对特定的参数值（如用户ID）单独限流。常用于防护热点数据被恶意访问。</div>
                                <div class="input-row">
                                    <input class="input" v-model="hotUserId" placeholder="User ID">
                                    <button class="btn btn-primary" @click="trigger('hot', hotTimes)"><span>▶</span>
                                        热点测试</button>
                                </div>



                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">参数字段:</span>
                                        <span class="config-value">userId</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">热点阈值:</span>
                                        <span class="config-value">100 QPS</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Nacos Controls -->
                        <div v-if="activeComponent === 'nacos'">
                            <div class="control-group">
                                <div class="control-label">服务发现</div>
                                <div class="test-description">🔹 查询当前 Nacos 注册中的所有实例，验证服务发现功能是否正常。</div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/nacos/services</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testNacosServices()">
                                    <span>▶</span>获取服务列表</button>

                                <!-- Result Display for Nacos Services -->
                                <div class="result-display" :class="getResultDisplay('nacos-services')?.status"
                                    v-if="getResultDisplay('nacos-services')"
                                    @click="showResultDetail('nacos-services')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('nacos-services')?.status">
                                            {{ getResultDisplay('nacos-services')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('nacos-services')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('nacos-services')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('nacos-services')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('nacos-services')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('nacos-services')?.code">HTTP {{
                                            getResultDisplay('nacos-services')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">配置管理</div>
                                <div class="test-description">🔹 加载 Nacos 的配置，动态刷新。</div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/nacos/nacos-config</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testNacosConfig()">
                                    <span>▶</span>读取动态配置
                                </button>

                                <!-- Result Display for Nacos Config -->
                                <div class="result-display" :class="getResultDisplay('nacos-config')?.status"
                                    v-if="getResultDisplay('nacos-config')" @click="showResultDetail('nacos-config')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('nacos-config')?.status">
                                            {{ getResultDisplay('nacos-config')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('nacos-config')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('nacos-config')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('nacos-config')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('nacos-config')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('nacos-config')?.code">HTTP {{
                                            getResultDisplay('nacos-config')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                            </div>
                        </div>

                        <!-- Dubbo Controls -->
                        <div v-if="activeComponent === 'dubbo'">
                            <div class="control-group">
                                <div class="control-label">RPC 调用</div>
                                <div class="test-description">🔹 使用 Dubbo 进行远程整整本地数据序列化/反序列化，港口超有易首。相比 HTTP 性能提儵20倍以上。
                                </div>
                                <div class="input-row">
                                    <input class="input" type="number" v-model.number="dubboProductId" placeholder="ID">
                                </div>
                                <div class="input-row">
                                    <button class="btn btn-primary flex-1" @click="testDubboSync()"><span>▶</span>
                                        同步调用</button>
                                    <button class="btn btn-primary flex-1" @click="testDubboBatch()"><span>▶</span>
                                        批量调用</button>
                                    <button class="btn btn-primary flex-1" @click="testDubboListAll()"><span>▶</span>
                                        查询所有</button>
                                </div>



                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">RPC 协议:</span>
                                        <span class="config-value">Dubbo 3.2.11</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">传输协议:</span>
                                        <span class="config-value">TCP (Netty)、HTTP/2</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">序列化:</span>
                                        <span class="config-value">Hessian2 (䮤量小)</span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">协议性能对比</div>
                                <div class="test-description">🔹 比较 Feign 和 Dubbo 两种 RPC 协议的性能实际差既。每整拫否会自动计算性能指标。</div>
                                <div class="input-row">
                                    <input class="input" type="number" v-model.number="compareTimes" placeholder="次数">
                                    <button class="btn btn-primary" @click="testFeignVsDubbo()"><span>▶</span> Feign vs
                                        Dubbo</button>
                                </div>
                                <div id="comparison-result" v-if="comparisonData.length > 0" style="margin-top: 12px;">
                                    <table class="comparison-table">
                                        <thead>
                                            <tr>
                                                <th>协议</th>
                                                <th>平均响应時间</th>
                                                <th>最少响应</th>
                                                <th>最大响应</th>
                                                <th>成功率</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in comparisonData" :key="item.protocol">
                                                <td>{{ item.protocol }}</td>
                                                <td>{{ item.avgRt }}ms</td>
                                                <td>{{ item.minRt }}ms</td>
                                                <td>{{ item.maxRt }}ms</td>
                                                <td>{{ item.successRate }}%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Seata Controls -->
                        <div v-if="activeComponent === 'seata'">
                            <div class="process-flow">
                                <div class="flow-title">🔄 Seata TCC 分布式事务1务流程</div>
                                <div class="flow-diagram">1. Try: 业务2服务预保留资源（锁元 锁账户）
                                    2. Confirm: 全部服务预保成功后，事务提交，真正执行业务
                                    3. Cancel: 法业务稁发失败，恢复所有法字级字段不物理量</div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">TCC 事务模式</div>
                                <div class="test-description">🔹 TCC 保证强一致性，但需业业服务实现 Try/Confirm/Cancel
                                    三个接口。适合对一致性要求高的业务场景。</div>
                                <div class="input-row">
                                    <input class="input" v-model="tccCommodityCode" placeholder="商品编码">
                                    <input class="input" type="number" v-model.number="tccCount" placeholder="数量"
                                        style="width:60px">
                                </div>
                                <div class="input-row">
                                    <button class="btn btn-primary flex-1"
                                        @click="callWithResultDisplay(endpoint('tcc-ok'),'tcc-ok', 'seata-tcc-ok')"><span>▶</span>
                                        提交事务</button>
                                    <button class="btn btn-danger flex-1"
                                        @click="callWithResultDisplay(endpoint('tcc-fail'),'tcc-fail', 'seata-tcc-fail')"><span>▶</span>
                                        回滚事务</button>
                                </div>

                                <!-- Result Display for TCC Test -->
                                <div class="result-display" :class="getResultDisplay('seata-tcc-ok')?.status"
                                    v-if="getResultDisplay('seata-tcc-ok') && !getResultDisplay('seata-tcc-fail')"
                                    @click="showResultDetail('seata-tcc-ok')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">事务测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('seata-tcc-ok')?.status">
                                            {{ getResultDisplay('seata-tcc-ok')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('seata-tcc-ok')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('seata-tcc-ok')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('seata-tcc-ok')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('seata-tcc-ok')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('seata-tcc-ok')?.code">HTTP {{
                                            getResultDisplay('seata-tcc-ok')?.code }}</span>
                                    </div>
                                </div>

                                <div class="result-display" :class="getResultDisplay('seata-tcc-fail')?.status"
                                    v-if="getResultDisplay('seata-tcc-fail')"
                                    @click="showResultDetail('seata-tcc-fail')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">事务测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('seata-tcc-fail')?.status">
                                            {{ getResultDisplay('seata-tcc-fail')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('seata-tcc-fail')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('seata-tcc-fail')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('seata-tcc-fail')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('seata-tcc-fail')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('seata-tcc-fail')?.code">HTTP {{
                                            getResultDisplay('seata-tcc-fail')?.code }}</span>
                                    </div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">事务模式:</span>
                                        <span class="config-value">TCC (强一致)</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">参与治理方式:</span>
                                        <span class="config-value">Seata Server</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">超时设置:</span>
                                        <span class="config-value">300s</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Higress Controls -->
                        <div v-if="activeComponent === 'higress'">
                            <div class="process-flow">
                                <div class="flow-title">🔄 网关与鉴权流程</div>
                                <div class="flow-diagram">1. 来自请求 → Higress 网关
                                    2. 执行路由规则 (鉴权、限流)
                                    3. 传递后端业务服务
                                    4. 返回应答给客户端</div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">网关路由</div>
                                <div class="test-description">🔹 检查网关路由规则配置，验证路由是否正常工作。包含传递模式、负载均衡等配置。</div>
                                <button class="btn btn-primary mb-2" @click="testGatewayRouting()"><span>▶</span>
                                    检查路由规则</button>

                                <!-- Result Display for Gateway Routing Test -->
                                <div class="result-display" :class="getResultDisplay('higress-routing')?.status"
                                    v-if="getResultDisplay('higress-routing')"
                                    @click="showResultDetail('higress-routing')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">路由测试结果</span>
                                        <span class="result-status"
                                            :class="getResultDisplay('higress-routing')?.status">
                                            {{ getResultDisplay('higress-routing')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('higress-routing')?.status === 'error' ? '✘ 失败' : '⏳ 执行中'
                                            }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('higress-routing')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('higress-routing')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('higress-routing')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('higress-routing')?.code">HTTP {{
                                            getResultDisplay('higress-routing')?.code }}</span>
                                    </div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">网关类型:</span>
                                        <span class="config-value">Higress (Envoy 基础)</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">路由模式:</span>
                                        <span class="config-value">加权轮询、Random</span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">安全鉴权</div>
                                <div class="test-description">🔹 测试鉴权一行，模拟认可的请求与不认可的请求。验证模型是否正常工作。</div>
                                <div class="input-row">
                                    <button class="btn btn-primary flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-pass'),'gateway-auth', 'higress-auth-pass')"><span>▶</span>
                                        鉴权通过</button>
                                    <button class="btn btn-danger flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-fail'),'gateway-auth', 'higress-auth-fail')"><span>▶</span>
                                        鉴权拒绝</button>
                                </div>

                                <!-- Result Display for Auth Tests -->
                                <div class="result-display" :class="getResultDisplay('higress-auth-pass')?.status"
                                    v-if="getResultDisplay('higress-auth-pass') && !getResultDisplay('higress-auth-fail')"
                                    @click="showResultDetail('higress-auth-pass')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">鉴权测试结果</span>
                                        <span class="result-status"
                                            :class="getResultDisplay('higress-auth-pass')?.status">
                                            {{ getResultDisplay('higress-auth-pass')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('higress-auth-pass')?.status === 'error' ? '✘ 失败' : '⏳ 执行中'
                                            }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('higress-auth-pass')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{
                                            getResultDisplay('higress-auth-pass')?.timestamp }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('higress-auth-pass')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('higress-auth-pass')?.code">HTTP {{
                                            getResultDisplay('higress-auth-pass')?.code }}</span>
                                    </div>
                                </div>

                                <div class="result-display" :class="getResultDisplay('higress-auth-fail')?.status"
                                    v-if="getResultDisplay('higress-auth-fail')"
                                    @click="showResultDetail('higress-auth-fail')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">鉴权测试结果</span>
                                        <span class="result-status"
                                            :class="getResultDisplay('higress-auth-fail')?.status">
                                            {{ getResultDisplay('higress-auth-fail')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('higress-auth-fail')?.status === 'error' ? '✘ 失败' : '⏳ 执行中'
                                            }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('higress-auth-fail')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{
                                            getResultDisplay('higress-auth-fail')?.timestamp }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('higress-auth-fail')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('higress-auth-fail')?.code">HTTP {{
                                            getResultDisplay('higress-auth-fail')?.code }}</span>
                                    </div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">身份验证:</span>
                                        <span class="config-value">JWT Token</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">鉴权方式:</span>
                                        <span class="config-value">Header Authorization</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SCA Controls -->
                        <div v-if="activeComponent === 'sca'">
                            <div class="control-group">
                                <div class="control-label">OpenFeign REST 调用</div>
                                <div class="test-description">
                                    🔹 展示 OpenFeign 的完整功能,包括负载均衡、熔断降级、超时控制、性能监控等,提供更全面的调用信息。
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/feign/call-enhanced</span>
                                    </div>
                                </div>
                                <div class="input-row">
                                    <input class="input" type="number" v-model.number="feignProductId"
                                        placeholder="商品ID">
                                    <button class="btn btn-primary" @click="testFeignEnhanced('normal')"><span>▶</span>
                                        正常调用</button>
                                    <button class="btn btn-danger" @click="testFeignEnhanced('error')"><span>▶</span>
                                        模拟失败</button>
                                    <button class="btn btn-warning" @click="testFeignEnhanced('degrade')"><span>▶</span>
                                        模拟超时降级</button>
                                </div>

                                <!-- Result Display for OpenFeign Enhanced -->
                                <div class="result-display" :class="getResultDisplay('feign-enhanced')?.status"
                                    v-if="getResultDisplay('feign-enhanced')"
                                    @click="showResultDetail('feign-enhanced')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('feign-enhanced')?.status">
                                            {{ getResultDisplay('feign-enhanced')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('feign-enhanced')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('feign-enhanced')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('feign-enhanced')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('feign-enhanced')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('feign-enhanced')?.code">HTTP {{
                                            getResultDisplay('feign-enhanced')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>

                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">参数含义:</span>
                                        <span class="config-value">productId: 商品ID (99999=模拟失败, 88888=模拟降级)</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">功能集成:</span>
                                        <span class="config-value">负载均衡+熔断+超时</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">降级策略:</span>
                                        <span class="config-value">返回默认商品</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">性能监控:</span>
                                        <span class="config-value">自动记录调用耗时</span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">LoadBalancer 负载均衡</div>
                                <div class="test-description">
                                    🔹 Spring Cloud LoadBalancer 是一个轻量级、响应式友好的客户端负载均衡器，用于在调用远程服务时，从服务注册中心（如
                                    Eureka、Nacos、Consul）获取可用实例列表，并根据策略选择一个实例进行请求
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/load-balance</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testLoadBalance()"><span>▶</span>
                                    测试负载均衡策略</button>

                                <!-- Result Display for Load Balance -->
                                <div class="result-display" :class="getResultDisplay('load-balance')?.status"
                                    v-if="getResultDisplay('load-balance')" @click="showResultDetail('load-balance')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('load-balance')?.status">
                                            {{ getResultDisplay('load-balance')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('load-balance')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('load-balance')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('load-balance')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('load-balance')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('load-balance')?.code">HTTP {{
                                            getResultDisplay('load-balance')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">方案:</span>
                                        <span class="config-value">默认轮询（Round Robin）</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">如何启用:</span>
                                        <span class="config-value">
                                            在pom中配置spring-cloud-starter-loadbalancer
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">超时与重试机制</div>
                                <div class="test-description">
                                    🔹 配置连接超时和读取超时,防止服务调用长时间阻塞。支持自定义重试策略,但需注意幂等性问题。
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/timeout-retry</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testTimeoutRetry()"><span>▶</span>
                                    测试超时机制</button>

                                <!-- Result Display for Timeout Retry -->
                                <div class="result-display" :class="getResultDisplay('timeout-retry')?.status"
                                    v-if="getResultDisplay('timeout-retry')" @click="showResultDetail('timeout-retry')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('timeout-retry')?.status">
                                            {{ getResultDisplay('timeout-retry')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('timeout-retry')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('timeout-retry')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('timeout-retry')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('timeout-retry')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('timeout-retry')?.code">HTTP {{
                                            getResultDisplay('timeout-retry')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">超时配置:</span>
                                        <div class="config-value">
                                            <div class="code-block">
                                                <pre><code class="language-yaml">spring:
  cloud:
    openfeign:
      client:
        config:
          # 默认配置
          default:
            logger-level: full
            connect-timeout: 1000
            read-timeout: 2000
          # 具体 feign 客户端的超时配置
          service-product:
            logger-level: full
            connect-timeout: 3000
            read-timeout: 4000
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">重试策略:</span>
                                        <span class="config-value">默认不重试</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">配置位置:</span>
                                        <div class="config-value">
                                            <div class="code-block">
                                                <pre><code class="language-java">@Configuration
public class ProductServiceConfig {
    @Bean
    public Retryer retryer() {
        return new Retryer.Default(100, 1000, 3);
    }
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">请求拦截器</div>
                                <div class="test-description">
                                    🔹 Feign 拦截器可统一处理请求头、认证信息、日志记录、性能监控等横切关注点,实现 AOP 功能。
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/feign-interceptor</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testFeignInterceptor()"><span>▶</span>
                                    测试拦截器</button>

                                <!-- Result Display for Feign Interceptor -->
                                <div class="result-display" :class="getResultDisplay('feign-interceptor')?.status"
                                    v-if="getResultDisplay('feign-interceptor')"
                                    @click="showResultDetail('feign-interceptor')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status"
                                            :class="getResultDisplay('feign-interceptor')?.status">
                                            {{ getResultDisplay('feign-interceptor')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('feign-interceptor')?.status === 'error' ? '✘ 失败' : '⏳ 执行中'
                                            }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('feign-interceptor')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{
                                            getResultDisplay('feign-interceptor')?.timestamp }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('feign-interceptor')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('feign-interceptor')?.code">HTTP {{
                                            getResultDisplay('feign-interceptor')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">功能:</span>
                                        <span class="config-value">添加 Token、日志、追踪ID</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">配置方式-全局生效:</span>
                                        <span class="config-value">
                                            <div class="code-block">
	                                            <pre><code class="language-java">@Component
public class XTokenRequestInterceptor implements RequestInterceptor {
    @Override
    public void apply(RequestTemplate template) {
        System.out.println("XTokenRequestInterceptor ...");
        template.header("X-Token", UUID.randomUUID().toString());
    }
}
</code></pre>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">配置方式-特定服务生效:</span>
                                        <span class="config-value">
                                            <div class="code-block">
	                                            <pre><code class="language-java">spring:
  cloud:
    openfeign:
      client:
        config:
          service-product:
            # 该请求拦截器仅对当前客户端有效
            request-interceptors:
              - indi.mofan.order.interceptor.XTokenRequestInterceptor
</code></pre>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">应用场景:</span>
                                        <span class="config-value">认证、监控、链路追踪</span>
                                    </div>
                                </div>
                            </div>

                            <div class="control-group">
                                <div class="control-label">配置动态刷新</div>
                                <div class="test-description">
                                    🔹 通过 Nacos 配置中心和 @RefreshScope 注解,实现配置的动态刷新,无需重启应用即可生效。
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/config-refresh</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testConfigRefresh()"><span>▶</span>
                                    查看当前配置</button>

                                <!-- Result Display for Config Refresh -->
                                <div class="result-display" :class="getResultDisplay('config-refresh')?.status"
                                    v-if="getResultDisplay('config-refresh')"
                                    @click="showResultDetail('config-refresh')" style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('config-refresh')?.status">
                                            {{ getResultDisplay('config-refresh')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('config-refresh')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('config-refresh')?.message ||
                                        '无返回信息' }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('config-refresh')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('config-refresh')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('config-refresh')?.code">HTTP {{
                                            getResultDisplay('config-refresh')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">配置来源:</span>
                                        <span class="config-value">Nacos (common.yaml)</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">刷新机制:</span>
                                        <span class="config-value">@RefreshScope 自动刷新</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">Nacos 地址:</span>
                                        <span class="config-value">http://localhost:8848/nacos</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">验证方法:</span>
                                        <span class="config-value">修改 Nacos 配置后刷新</span>
                                    </div>
                                </div>
                            </div>

                            <div class="control-group">
                                <div class="control-label">服务健康检查</div>
                                <div class="test-description">
                                    🔹 通过 Spring Boot Actuator 和 Nacos 健康检查机制,实时监控服务实例状态,自动剔除不健康实例。
                                </div>
                                <div class="config-panel api-address-panel">
                                    <div class="config-item api-address-item">
                                        <span class="config-label">📍 API 地址:</span>
                                        <span class="config-value api-address-value">GET
                                            /api/order/demo/health-check</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" @click="testHealthCheck()"><span>▶</span>
                                    检查服务健康</button>

                                <!-- Result Display for Health Check -->
                                <div class="result-display" :class="getResultDisplay('health-check')?.status"
                                    v-if="getResultDisplay('health-check')" @click="showResultDetail('health-check')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('health-check')?.status">
                                            {{ getResultDisplay('health-check')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('health-check')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('health-check')?.message || '无返回信息'
                                        }}</div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('health-check')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{
                                            getResultDisplay('health-check')?.responseTime }}ms</span>
                                        <span v-if="getResultDisplay('health-check')?.code">HTTP {{
                                            getResultDisplay('health-check')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">健康端点:</span>
                                        <span class="config-value">/actuator/health</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">检查机制:</span>
                                        <span class="config-value">Nacos 定期心跳检测</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">自动剔除:</span>
                                        <span class="config-value">不健康实例自动下线</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">优雅下线:</span>
                                        <span class="config-value">/actuator/shutdown</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- OpenTelemetry Controls -->
                        <div v-if="activeComponent === 'opentelemetry'">
                            <div class="process-flow">
                                <div class="flow-title">🔄 可観测性库流程</div>
                                <div class="flow-diagram">1. 应用自轫折中 Trace/Metric/Log
                                    2. OpenTelemetry SDK 收集数据
                                    3. 传递到可観测性后端
                                    4. 可観测平台业务化展示与分析</div>
                            </div>
                            <div class="control-group">
                                <div class="control-label">分布式互追 Trace</div>
                                <div class="test-description">🔹 生成模拟的应用链路数据，展示路迷液中的各个谢拒的执行流程、时间消耗、业务参数等。</div>
                                <button class="btn btn-primary" @click="testTracing()"><span>▶</span> 生成模拟链路数据</button>

                                <!-- Result Display for Tracing -->
                                <div class="result-display" :class="getResultDisplay('tracing')?.status"
                                    v-if="getResultDisplay('tracing')" @click="showResultDetail('tracing')"
                                    style="cursor: pointer;">
                                    <div class="result-header">
                                        <span class="result-title">测试结果</span>
                                        <span class="result-status" :class="getResultDisplay('tracing')?.status">
                                            {{ getResultDisplay('tracing')?.status === 'success' ? '✔ 成功' :
                                            getResultDisplay('tracing')?.status === 'error' ? '✘ 失败' : '⏳ 执行中' }}
                                        </span>
                                    </div>
                                    <div class="result-content">{{ getResultDisplay('tracing')?.message || '无返回信息' }}
                                    </div>
                                    <div class="result-meta">
                                        <span class="result-timestamp">{{ getResultDisplay('tracing')?.timestamp
                                            }}</span>
                                        <span class="result-response-time">{{ getResultDisplay('tracing')?.responseTime
                                            }}ms</span>
                                        <span v-if="getResultDisplay('tracing')?.code">HTTP {{
                                            getResultDisplay('tracing')?.code }}</span>
                                    </div>
                                    <div
                                        style="text-align: center; margin-top: 8px; font-size: 10px; color: var(--text-secondary); opacity: 0.7;">
                                        点击查看详情</div>
                                </div>
                                <div class="config-panel">
                                    <div class="config-item">
                                        <span class="config-label">Trace 采样率:</span>
                                        <span class="config-value">100% (demo 模式)</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">Trace 最大事件:</span>
                                        <span class="config-value">1024</span>
                                    </div>
                                    <div class="config-item">
                                        <span class="config-label">后端接口:</span>
                                        <span class="config-value">Jaeger/Skywalking</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Right: Terminal Output -->
                <div class="panel" style="border:none; box-shadow:var(--shadow-lg);">
                    <div class="terminal">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <div class="dot dot-red"></div>
                                <div class="dot dot-yellow"></div>
                                <div class="dot dot-green"></div>
                            </div>
                            <div class="terminal-title">user@dev-console:~/logs</div>
                            <div style="flex:1"></div>
                            <button class="btn btn-sm" @click="reset"
                                style="background:transparent; border:none; color:var(--text-secondary);">
                                🗑️ Clear
                            </button>
                        </div>
                        <div class="terminal-body" id="terminal-body">
                            <div v-if="history.length === 0"
                                style="color:var(--text-secondary); padding:20px; text-align:center;">
                                // Waiting for commands...<br>
                                // Click buttons on the left to execute tests.
                            </div>
                            <div class="log-entry" v-for="item in history" :key="item.id">
                                <div class="log-time">[{{ item.time }}]</div>
                                <div class="log-type">{{ item.type }}</div>
                                <div class="log-status" :class="item.status === '成功' ? 'success' : 'error'">
                                    {{ item.status === '成功' ? '✔' : '✘' }}
                                </div>
                                <div class="log-content" @click="viewDetail(item)">
                                    {{ item.msg }}
                                    <span class="log-meta">{{ item.rt }}ms</span>
                                    <span class="log-meta">HTTP {{ item.code }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. Best Practices & Statistics -->
            <div>
                <div class="stats-summary">
                    <div class="stat-item">
                        <span class="stat-label">总请求数:</span>
                        <span class="stat-value">{{ history.length }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">成功率:</span>
                        <span class="stat-value">{{ successRate }}%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">平均响应时间:</span>
                        <span class="stat-value">{{ avgResponseTime }}ms</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">测试覆盖:</span>
                        <span class="stat-value">{{ testedComponents }}/13</span>
                    </div>
                </div>

                <div class="best-practices">
                    <div class="best-practices-title">📚 微服务最佳实践</div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>流量防护</strong>：在网关和服务层使用 Sentinel 进行流量控制，防止级联故障。建议配置 QPS 限流、线程隔离、熔断降级等多个维度的防护。
                        </span>
                    </div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>服务通信</strong>：同步调用使用 OpenFeign + LoadBalancer，异步调用使用消息队列。Dubbo 适合内部高性能调用，REST
                            适合跨域/外部调用。
                        </span>
                    </div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>分布式事务</strong>：强一致性业务使用 Seata TCC 模式，最终一致性业务使用本地消息表或 SAGA 模式。
                        </span>
                    </div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>配置管理</strong>：敏感配置和环境相关配置通过 Nacos 集中管理，支持应用热更新。避免硬编码和手动修改。
                        </span>
                    </div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>可观测性</strong>：使用 OpenTelemetry 统一采集 Trace、Metric、Log，提升故障排查效率。在链路上加上业务标记便于问题追踪。
                        </span>
                    </div>
                    <div class="practice-item">
                        <span class="practice-icon">✅</span>
                        <span>
                            <strong>网关安全</strong>：所有流量通过网关，在网关层做统一的鉴权、限流、日志记录。使用黑白名单和 JWT Token 控制访问权限。
                        </span>
                    </div>
                </div>
            </div>
        </main>

        <!-- Detail Modal -->
        <div class="modal-overlay" v-cloak v-if="showDetailModal" @click.self="showDetailModal=false">
            <div class="modal">
                <div class="modal-header">
                    <h3 style="margin:0; font-size:16px;">Response Details</h3>
                    <button class="btn btn-sm" @click="showDetailModal=false">Close</button>
                </div>
                <div class="modal-body">
                    <pre class="code-block" id="json-display"></pre>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="js/service-demo.js"></script>
</body>

</html>
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; font-src 'self'; img-src 'self' data:; connect-src 'self' https:;">
    <title>Spring Cloud DevConsole · Forge</title>
    <script src="js/vue.global.prod.js"></script>
    <script src="js/axios.min.js"></script>
    <script src="js/simple-highlight.js"></script>
    <link rel="stylesheet" href="css/service-demo-redesign.css">
</head>

<body>
<div id="app" class="forge-app">
    <div class="lumina-layout forge-layout">
        <!-- 左侧导航栏 -->
        <aside class="lumina-sidebar forge-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <div class="brand-logo">
                        <div class="logo-gradient"></div>
                        <span class="logo-text">SC</span>
                    </div>
                    <div class="brand-info">
                        <div class="brand-title">Spring Cloud</div>
                        <div class="brand-subtitle">DevConsole</div>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">演示分层</div>
                    <a class="nav-item" @click="toggleRoadmapSection()">
                        <div class="nav-item-icon">🧭</div>
                        <span class="nav-item-text">{{ showRoadmapSection ? '隐藏路线图能力' : '显示路线图能力' }}</span>
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">控制面</div>
                    <div class="nav-group">
                        <a class="nav-item nav-item-parent" :class="{ active: activeComponent === 'nacos' }" @click="toggleComponentMenu('nacos')">
                            <div class="nav-item-icon">
                                <img src="images/logos/nacos-aliyun.svg" alt="Nacos">
                            </div>
                            <span class="nav-item-text">Nacos</span>
                            <span class="nav-arrow" :class="{ expanded: expandedMenus.nacos }">▼</span>
                        </a>
                        <div class="nav-submenu" v-show="expandedMenus.nacos">
                            <a class="nav-subitem" :class="{ active: activeSection === 'nacos-services' }" @click="selectSection('nacos', 'nacos-services')">
                                <span class="nav-subitem-text">服务发现</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'nacos-config' }" @click="selectSection('nacos', 'nacos-config')">
                                <span class="nav-subitem-text">配置管理</span>
                            </a>
                        </div>
                    </div>
                    <a class="nav-item" v-if="showRoadmapSection" :class="{ active: activeComponent === 'opensergo' }" @click="selectComponent('opensergo')">
                        <div class="nav-item-icon">
                            <img src="images/logos/opensergo.png" alt="OpenSergo">
                        </div>
                        <span class="nav-item-text">OpenSergo</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">治理面</div>
                    <div class="nav-group">
                        <a class="nav-item nav-item-parent" :class="{ active: activeComponent === 'sentinel' }" @click="toggleComponentMenu('sentinel')">
                            <div class="nav-item-icon">
                                <img src="images/logos/sentinel-aliyun.svg" alt="Sentinel">
                            </div>
                            <span class="nav-item-text">Sentinel</span>
                            <span class="nav-arrow" :class="{ expanded: expandedMenus.sentinel }">▼</span>
                        </a>
                        <div class="nav-submenu" v-show="expandedMenus.sentinel">
                            <a class="nav-subitem" :class="{ active: activeSection === 'sentinel-qps' }" @click="selectSection('sentinel', 'sentinel-qps')">
                                <span class="nav-subitem-text">流量控制 (QPS)</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'sentinel-thread' }" @click="selectSection('sentinel', 'sentinel-thread')">
                                <span class="nav-subitem-text">并发控制 (Thread)</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'sentinel-hot' }" @click="selectSection('sentinel', 'sentinel-hot')">
                                <span class="nav-subitem-text">热点参数限流</span>
                            </a>
                        </div>
                    </div>
                    <a class="nav-item" v-if="showRoadmapSection" :class="{ active: activeComponent === 'chaosblade' }" @click="selectComponent('chaosblade')">
                        <div class="nav-item-icon">
                            <img src="images/logos/ChaosBlade.png" alt="ChaosBlade">
                        </div>
                        <span class="nav-item-text">ChaosBlade</span>
                    </a>
                    <a class="nav-item" v-if="showRoadmapSection" :class="{ active: activeComponent === 'appactive' }" @click="selectComponent('appactive')">
                        <div class="nav-item-icon">
                            <img src="images/logos/appactive.svg" alt="AppActive">
                        </div>
                        <span class="nav-item-text">AppActive</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">通信层</div>
                    <div class="nav-group">
                        <a class="nav-item nav-item-parent" :class="{ active: activeComponent === 'dubbo' }" @click="toggleComponentMenu('dubbo')">
                            <div class="nav-item-icon">
                                <img src="images/logos/dubbo-aliyun.svg" alt="Dubbo">
                            </div>
                            <span class="nav-item-text">Dubbo</span>
                            <span class="nav-arrow" :class="{ expanded: expandedMenus.dubbo }">▼</span>
                        </a>
                        <div class="nav-submenu" v-show="expandedMenus.dubbo">
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-batch' }" @click="selectSection('dubbo', 'dubbo-batch')">
                                <span class="nav-subitem-text">批量调用</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-list-all' }" @click="selectSection('dubbo', 'dubbo-list-all')">
                                <span class="nav-subitem-text">查询所有</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-timeout' }" @click="selectSection('dubbo', 'dubbo-timeout')">
                                <span class="nav-subitem-text">超时调用</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-exception' }" @click="selectSection('dubbo', 'dubbo-exception')">
                                <span class="nav-subitem-text">异常调用</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-async' }" @click="selectSection('dubbo', 'dubbo-async')">
                                <span class="nav-subitem-text">异步调用</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-region' }" @click="selectSection('dubbo', 'dubbo-region')">
                                <span class="nav-subitem-text">同机房/区域优先</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-concurrency' }" @click="selectSection('dubbo', 'dubbo-concurrency')">
                                <span class="nav-subitem-text">限流降级 - 并发控制</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-loadbalance' }" @click="selectSection('dubbo', 'dubbo-loadbalance')">
                                <span class="nav-subitem-text">负载均衡策略测试</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-filter' }" @click="selectSection('dubbo', 'dubbo-filter')">
                                <span class="nav-subitem-text">Filter 拦截器</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'dubbo-version-group' }" @click="selectSection('dubbo', 'dubbo-version-group')">
                                <span class="nav-subitem-text">版本与分组</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'protocol-compare' }" @click="selectSection('dubbo', 'protocol-compare')">
                                <span class="nav-subitem-text">协议对比测试</span>
                            </a>
                        </div>
                    </div>
                    <a class="nav-item" :class="{ active: activeComponent === 'sca' }" @click="selectComponent('sca')">
                        <div class="nav-item-icon">
                            <img src="images/logos/spring-cloud-aliyun.svg" alt="Spring Cloud">
                        </div>
                        <span class="nav-item-text">Spring Cloud</span>
                    </a>
                    <div class="nav-group">
                        <a class="nav-item nav-item-parent" :class="{ active: activeComponent === 'rocketmq' }" @click="toggleComponentMenu('rocketmq')">
                            <div class="nav-item-icon">
                                <img src="images/logos/rocketmq-aliyun.svg" alt="RocketMQ">
                            </div>
                            <span class="nav-item-text">RocketMQ</span>
                            <span class="nav-arrow" :class="{ expanded: expandedMenus.rocketmq }">▼</span>
                        </a>
                        <div class="nav-submenu" v-show="expandedMenus.rocketmq">
                            <a class="nav-subitem" :class="{ active: activeSection === 'rocketmq-business-chain' }" @click="selectSection('rocketmq', 'rocketmq-business-chain')">
                                <span class="nav-subitem-text">订单链路10场景</span>
                            </a>
                        </div>
                    </div>
                    <a class="nav-item" :class="{ active: activeComponent === 'seata' }" @click="selectComponent('seata')">
                        <div class="nav-item-icon">
                            <img src="images/logos/seata-aliyun.svg" alt="Seata">
                        </div>
                        <span class="nav-item-text">Seata</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">网关与调度</div>
                    <a class="nav-item" :class="{ active: activeComponent === 'gateway' }" @click="selectComponent('gateway')">
                        <div class="nav-item-icon">
                            <img src="images/logos/spring-cloud-aliyun.svg" alt="Gateway">
                        </div>
                        <span class="nav-item-text">Gateway</span>
                    </a>
                    <a class="nav-item" v-if="showRoadmapSection" :class="{ active: activeComponent === 'schedulerx' }" @click="selectComponent('schedulerx')">
                        <div class="nav-item-icon">
                            <img src="images/logos/schedulerx.png" alt="SchedulerX">
                        </div>
                        <span class="nav-item-text">SchedulerX</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">数据与运维</div>
                    <a class="nav-item" v-if="showRoadmapSection" :class="{ active: activeComponent === 'arctic' }" @click="selectComponent('arctic')">
                        <div class="nav-item-icon">📊</div>
                        <span class="nav-item-text">Arctic</span>
                    </a>
                    <div class="nav-group">
                        <a class="nav-item nav-item-parent" :class="{ active: activeComponent === 'redis' }" @click="toggleComponentMenu('redis')">
                            <div class="nav-item-icon">
                                <img src="images/icons/Redis.svg" alt="Redis">
                            </div>
                            <span class="nav-item-text">Redis</span>
                            <span class="nav-arrow" :class="{ expanded: expandedMenus.redis }">▼</span>
                        </a>
                        <div class="nav-submenu" v-show="expandedMenus.redis">
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-data-structures' }" @click="selectSection('redis', 'redis-data-structures')">
                                <span class="nav-subitem-text">基础数据结构</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-distributed-lock' }" @click="selectSection('redis', 'redis-distributed-lock')">
                                <span class="nav-subitem-text">分布式锁</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-cache-issues' }" @click="selectSection('redis', 'redis-cache-issues')">
                                <span class="nav-subitem-text">缓存问题</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-rate-limit' }" @click="selectSection('redis', 'redis-rate-limit')">
                                <span class="nav-subitem-text">限流计数</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-pipeline' }" @click="selectSection('redis', 'redis-pipeline')">
                                <span class="nav-subitem-text">Pipeline 批量</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-transaction' }" @click="selectSection('redis', 'redis-transaction')">
                                <span class="nav-subitem-text">事务与脚本</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-pubsub' }" @click="selectSection('redis', 'redis-pubsub')">
                                <span class="nav-subitem-text">发布订阅</span>
                            </a>
                            <a class="nav-subitem" :class="{ active: activeSection === 'redis-persistence' }" @click="selectSection('redis', 'redis-persistence')">
                                <span class="nav-subitem-text">持久化与监控</span>
                            </a>
                        </div>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer forge-sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">👤</div>
                <div class="user-details">
                    <div class="user-name">xiongweisu</div>
                </div>
                </div>
                <button class="theme-toggle-btn" @click="toggleTheme" title="切换主题">
                    <img v-if="isDarkMode" src="images/icons/moon.svg" class="toggle-icon" alt="Dark Mode">
                    <img v-else src="images/icons/sun.svg" class="toggle-icon" alt="Light Mode">
                </button>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="lumina-main forge-main">
            <header class="forge-topbar">
                <div class="topbar-left">
                    <div class="topbar-title">Service Mesh Control Deck</div>
                    <div class="topbar-subtitle">Spring Cloud DevConsole · 行为与韧性实验场</div>
                </div>
                <div class="topbar-right">
                    <div class="topbar-env">ENV · DEV</div>
                    <div class="topbar-status">
                        <span class="status-dot"></span>
                        <span>系统在线</span>
                    </div>
                    <button class="theme-toggle-btn forge-toggle" @click="toggleTheme" title="切换主题">
                        <img v-if="isDarkMode" src="images/icons/moon.svg" class="toggle-icon" alt="Dark Mode">
                        <img v-else src="images/icons/sun.svg" class="toggle-icon" alt="Light Mode">
                    </button>
                </div>
            </header>
            <!-- 内容区域 -->
            <div class="lumina-content forge-content">
        <!-- 组件详情 -->
        <section class="lumina-section">
            <div v-if="activeComponent && componentData[activeComponent]">
                <div class="lumina-card component-card">
                    <div class="component-header">
                        <div class="component-icon">
                            <img :src="'images/logos/' + componentData[activeComponent].icon" :alt="componentData[activeComponent].name">
                        </div>
                        <div class="component-info">
                            <h3 class="component-name">{{ componentData[activeComponent].name }}</h3>
                            <p class="component-tag">{{ componentData[activeComponent].subtitle }}</p>
                        </div>
                        <div class="component-actions">
                            <a :href="componentData[activeComponent].docs" target="_blank" class="action-link">
                                <span>📖</span> 文档
                            </a>
                            <a :href="componentData[activeComponent].github" target="_blank" class="action-link">
                                <span>💻</span> GitHub
                            </a>
                        </div>
                    </div>
                    <p class="component-description">{{ componentData[activeComponent].description }}</p>
                    <div class="component-meta">
                        <div class="component-features">
                            <div class="feature-card" v-for="feature in componentData[activeComponent].features" :key="feature.name">
                                <div class="feature-title">{{ feature.name }}</div>
                                <div class="feature-desc">{{ feature.description }}</div>
                            </div>
                        </div>
                        <div class="component-actions-grid">
                            <div class="action-chip" v-for="action in componentData[activeComponent].actions" :key="action">
                                {{ action }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div v-else class="lumina-empty-state">
                <div class="empty-icon">👈</div>
                <div class="empty-text">请从左侧菜单选择一个组件查看详情</div>
            </div>
        </section>

        <!-- 控制台 -->
        <section class="lumina-section console-section" v-if="activeComponent && componentData[activeComponent]">
            <div class="lumina-card console-card">
                <div class="console-header">
                    <div class="console-title">
                        <span class="title-icon">⚡</span>
                        <span>{{ componentData[activeComponent].title }} 控制台</span>
                    </div>
                    <div class="console-actions">
                        <a :href="componentData[activeComponent].github" target="_blank" class="console-btn">GitHub</a>
                        <a :href="componentData[activeComponent].website" target="_blank" class="console-btn primary">文档</a>
                    </div>
                </div>
                <div class="console-body">
                    <!-- Sentinel Controls -->
                    <div v-if="activeComponent === 'sentinel'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="sentinel-qps" v-show="activeSection === 'sentinel-qps'">
                            <div class="control-label">流量控制 (QPS)</div>
                            <div class="test-description">🔹 向服务发送 N 个并发请求，观察 Sentinel
                                是否正确限流。QPS限流基于滑动时间窗口算法，超过阈值的请求会被直接拒绝。
                            </div>
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">限流阈值:</span>
                                    <span class="config-value">1000 QPS</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">当前状态:</span>
                                    <span class="config-value">✓ 正常运行</span>
                                </div>
                            </div>

                            <div class="input-row">
                                <input class="input" type="number" min="1" v-model.number="qpsTimes"
                                       placeholder="次数">
                                <button class="btn btn-primary" @click="trigger('qps', qpsTimes)"><span>▶</span>
                                    发送请求
                                </button>
                            </div>

                            <!-- Result Display for QPS Test -->
                        </div>
                        <div class="control-group" id="sentinel-thread" v-show="activeSection === 'sentinel-thread'">
                            <div class="control-label">并发控制 (Thread)</div>
                            <div class="test-description">🔹
                                通过线程隔离限制最多同时执行的线程数。当线程数达到阈值，新请求进入等待队列。
                            </div>

                            <!-- Result Display for Thread Test -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">线程数限制:</span>
                                    <span class="config-value">200</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">队列大小:</span>
                                    <span class="config-value">100</span>
                                </div>
                            </div>

                            <div class="input-row">
                                <input class="input" type="number" min="1" v-model.number="threadTimes"
                                       placeholder="线程数">
                                <button class="btn btn-primary" @click="testThread()"><span>▶</span> 并发测试</button>
                            </div>
                        </div>
                        <div class="control-group" id="sentinel-hot" v-show="activeSection === 'sentinel-hot'">
                            <div class="control-label">热点参数限流</div>
                            <div class="test-description">🔹
                                对特定的参数值（如用户ID）单独限流。常用于防护热点数据被恶意访问。
                            </div>

                            <!-- Result Display for Hotspot -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">参数字段:</span>
                                    <span class="config-value">userId</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">热点阈值:</span>
                                    <span class="config-value">100 QPS</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Nacos Controls -->
                    <div v-if="activeComponent === 'nacos'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="nacos-services" v-show="activeSection === 'nacos-services'">
                            <div class="control-label">服务发现</div>
                            <div class="test-description">🔹 查询当前 Nacos 注册中的所有实例，验证服务发现功能是否正常。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/nacos/services</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testNacosServices()">
                                <span>▶</span>获取服务列表
                            </button>

                            <!-- Result Display for Nacos Services -->
                        </div>
                        <div class="control-group" id="nacos-config" v-show="activeSection === 'nacos-config'">
                            <div class="control-label">配置管理</div>
                            <div class="test-description">🔹 加载 Nacos 的配置，动态刷新。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/nacos/nacos-config</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testNacosConfig()">
                                <span>▶</span>读取动态配置
                            </button>

                            <!-- Result Display for Nacos Config -->
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dubbo Controls -->
                    <!-- Dubbo Controls -->
                    <div v-if="activeComponent === 'dubbo'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <!-- 1. Batch Call -->
                        <div class="control-group" id="dubbo-batch" v-show="activeSection === 'dubbo-batch'">
                            <div class="control-label">批量调用</div>
                            <div class="test-description">🔹 批量调用 Dubbo 服务接口，验证高性能场景下的处理能力。</div>
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">RPC 协议:</span>
                                    <span class="config-value">
                                            1. 传统 Dubbo 协议：基于私有二进制协议，性能高但生态封闭</br>
                                        2. Triple 协议（Dubbo 3.x 默认）：基于 HTTP/2 + Protobuf，兼容 gRPC，更适合云原生和跨语言场景
                                        </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">优势:</span>
                                    <span class="config-value">
                                            1. 高性能：基于 Netty 的异步非阻塞 IO，支持高并发。</br>
                                        2. 透明调用：对开发者屏蔽网络细节。</br>
                                        3. 丰富的扩展点：协议、序列化、负载均衡等均可自定义。</br>
                                        4. 服务治理能力：支持熔断、限流、路由、权重、动态配置等。</br>
                                        5. 多语言支持：除 Java 外，还支持 Go、Node.js、Rust（通过 Triple 协议）。
                                        </span>
                                </div>
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/call-batch</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testDubboBatch()"><span>▶</span> 批量调用</button>
                            <!-- Result Display -->
                        </div>

                        <!-- 2. Query All -->
                        <div class="control-group" id="dubbo-list-all" v-show="activeSection === 'dubbo-list-all'">
                            <div class="control-label">查询所有</div>
                            <div class="test-description">🔹 查询所有产品信息，验证 Dubbo 服务的数据返回能力。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/list-all</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testDubboListAll()"><span>▶</span> 查询所有</button>
                            <!-- Result Display -->
                        </div>

                        <!-- 3. Timeout Call -->
                        <div class="control-group" id="dubbo-timeout" v-show="activeSection === 'dubbo-timeout'">
                            <div class="control-label">超时调用</div>
                            <div class="test-description">🔹 为 RPC
                                调用设置超时时间可以提升集群整体稳定性，避免无限等待响应结果导致的资源占用（比如大量长期无响应的请求占用线程池等）。在调用没有响应的情况下，比如
                                5s 之后，Dubbo
                                框架就会自动终止调用等待过程（抛出 TimeoutException），释放此次调用占用的资源。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/call-timeout?productId={{dubboProductId}}&sleepTime=4000</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testDubboTimeout()"><span>▶</span> 超时调用</button>
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">使用方式:</span>
                                    <span class="config-value">
                                            <div class="code-block no-copy collapsible">
                                                <pre><code class="language-java">1.配置全局默认超时时间为 5s（不配置的情况下，所有服务的默认超时时间是 1s）
dubbo:
  provider:
    timeout: 5000

2.在消费端，指定 productDubboService 服务调用的超时时间为 3s
@DubboReference(version = "1.0.0", group = "product", timeout = 3000, retries = 1, check = false)
private IProductDubboService productDubboService;

3.在提供端，指定 DemoService 服务调用的超时时间为 5s（可作为所有消费端的默认值，如果消费端有指定则优先级更高）
@DubboService(timeout=5000)
public class DemoServiceImpl implements DemoService{}

4.在消费端，指定 DemoService sayHello 方法调用的超时时间为 5s
@DubboReference(methods = {@Method(name = "sayHello", timeout = 5000)})
private DemoService demoService;

5.在提供端，指定 DemoService sayHello 方法调用的超时时间为 5s（可作为所有消费端的默认值，如果消费端有指定则优先级更高）
@DubboService(methods = {@Method(name = "sayHello", timeout = 5000)})
public class DemoServiceImpl implements DemoService{}
</code></pre>
                                            </div>
                                        </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">优先级:</span>
                                    <span class="config-value">
                                            - 方法级别配置 > 服务级别配置 > 全局配置 > 默认值<br>
                                            - nacos动态配置 > consumer > provider > 默认值
                                        </span>
                                </div>
                            </div>
                            <!-- Result Display -->
                        </div>

                        <!-- 4. Exception Call -->
                        <div class="control-group" id="dubbo-exception" v-show="activeSection === 'dubbo-exception'">
                            <div class="control-label">异常调用</div>
                            <div class="test-description">🔹 模拟服务调用异常，验证 Dubbo 的异常处理和容错机制。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/call-exception?productId={{dubboProductId}}</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testDubboException()"><span>▶</span>
                                异常调用
                            </button>
                            <!-- Result Display -->
                        </div>

                        <!-- 5. Async Call -->
                        <div class="control-group" id="dubbo-async" v-show="activeSection === 'dubbo-async'">
                            <div class="control-label">异步调用</div>
                            <div class="test-description">🔹 使用 CompletableFuture 实现异步调用，验证非阻塞通信能力。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/call-async?productId={{dubboProductId}}</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testDubboAsync()"><span>▶</span> 异步调用</button>
                            <!-- Result Display -->
                        </div>


                        <!-- 6. Region Priority Call -->
                        <div class="control-group" id="dubbo-region" v-show="activeSection === 'dubbo-region'">
                            <div class="control-label">同机房/区域优先</div>
                            <div class="test-description">🔹 验证 Dubbo 的同区域优先路由策略。当服务在多个区域部署时，优先调用同区域的服务实例，减少网络延迟。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/call-region?productId={{dubboProductId}}&amp;clientRegion={{dubboClientRegion}}</span>
                                </div>
                            </div>
                            <div class="input-row">
                                <select class="input" v-model="dubboClientRegion" class="width-200">
                                    <option value="hangzhou">杭州 (hangzhou)</option>
                                    <option value="beijing">北京 (beijing)</option>
                                    <option value="shanghai">上海 (shanghai)</option>
                                </select>
                                <button class="btn btn-primary" @click="testDubboRegion()"
                                        class="width-auto"><span>▶</span>
                                    区域优先调用
                                </button>
                            </div>
                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">当前服务区域:</span>
                                    <span class="config-value">shanghai、beijing <br>
                                            见 application.yml，激活(dev,shanghai)和(dev,beijing)配置分别启动两个服务
                                        </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">预期结果:</span>
                                    <span class="config-value">
                                            1. 选择"上海" -> 匹配成功，调用(tag=上海)服务<br>
                                            2. 选择"北京" -> 匹配成功，调用(tag=北京)服务<br>
                                            3. 选择"杭州" -> 匹配失败，若无其他服务则降级或报错(取决于路由策略)
                                        </span>
                                </div>
                            </div>
                        </div>

                        <!-- 7. Concurrency Control - Rate Limiting -->
                        <div class="control-group" id="dubbo-concurrency" v-show="activeSection === 'dubbo-concurrency'">
                            <div class="control-label">限流降级 - 并发控制</div>
                            <div class="test-description">🔹
                                Dubbo框架内置的并发控制策略，通过限制从同一客户端到同一服务的并发请求数，防止恶意请求使服务器过载，确保服务的稳定性，并防止使用过多资源。
                            </div>

                            <!-- Server-side Concurrency Control -->
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/concurrency?concurrentCount=10&sleepTime=3000</span>
                                </div>
                            </div>

                            <div class="input-row">
                                <input class="input" v-model.number="dubboConcurrentCount" type="number"
                                       placeholder="并发数量" class="width-120">
                                <input class="input" v-model.number="dubboSleepTime" type="number"
                                       placeholder="延迟(ms)" class="width-120">
                                <select class="input" v-model="dubboConcurrencyType" class="width-200">
                                    <option value="executes">Provider端-executes</option>
                                    <option value="actives">Consumer端-actives</option>
                                </select>
                                <button class="btn btn-primary" @click="testDubboConcurrency()"><span>▶</span> 并发测试
                                </button>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label" class="font-bold">1. 服务提供端限流：executes（侧重"自我保护"）</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-value">
                                        这是最常用的服务端限流手段，用于限制 Provider 某个接口或方法能同时处理的请求线程数。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">应用场景：</span>
                                    <span class="config-value">
                                        基于<strong>资源确定性</strong>的保护。例如，已知数据库连接池上限为 20，可设置 executes="20"，确保涌入的流量不会击穿后端数据库。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">触发效果：</span>
                                    <span class="config-value">
                                        当并发数达到阈值时，Provider 将拒绝新请求。此时 Consumer 端通常会感知到<strong>服务端线程池溢出</strong>（TaskPool overflow）或<strong>调用超时</strong>（Timeout）。
                                    </span>
                                </div>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label" class="font-bold">2. 服务消费端限流：actives（侧重"故障隔离"）</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-value">
                                        该参数限制的是当前 Consumer 实例对目标服务发起的最大并发调用数。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">应用场景：</span>
                                    <span class="config-value">
                                        防止<strong>慢服务拖垮调用者</strong>。例如，Consumer 同时调用 Service A 和 B，若 A 响应变慢且未设 actives 限制，Consumer 的所有线程可能被 A 占满，导致原本健康的 Service B 遭遇"饥饿"无法被调用。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">触发效果：</span>
                                    <span class="config-value">
                                        当并发数达到上限，新请求将在 <strong>Consumer 本地阻塞等待</strong>。直到之前的请求返回并释放信号量，后续请求才会发出。
                                    </span>
                                </div>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label" class="font-bold">3. 最佳实践建议</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">重点防御方向：</span>
                                    <span class="config-value">
                                        应优先配置 executes来重点防御Provider，作为服务提供方，你最清楚自身的"水位"（容量），这是系统稳健性的第一道、也是最重要的一道防线。<br>
                                        谨慎配置Consumer限流，消费端限流会导致请求在本地堆积，增加系统排队的复杂性。除非是针对极耗时的长连接任务，否则通常建议优先通过设置合理的 timeout（超时机制）来快速失败，而非盲目阻塞。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配合负载均衡：</span>
                                    <span class="config-value">
                                        推荐将限流与 loadbalance="leastactive"（最小活跃数负载均衡）配合使用。Dubbo 会自动将请求倾斜分配给并发数较低的节点，从而在集群维度实现流量的自适应调度。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">进阶治理方案：</span>
                                    <span class="config-value">
                                        对于复杂的生产环境（如热点参数限流、集群自适应保护），Dubbo 内置的静态配置可能略显单薄。建议集成 <strong>Sentinel</strong>（官方推荐），实现动态、细粒度且支持可视化监控的流量治理。
                                    </span>
                                </div>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">配置示例:</span>
                                    <span class="config-value">
                                        <div class="code-block no-copy collapsible">
                                            <pre><code class="language-java">// Consumer端配置:
@DubboReference(
    version = "1.0.0",
    group = "product",
    protocol = "dubbo",
    methods = {@Method(name = "testConcurrencyControlV1", actives = 3, retries = 0, timeout = 5000)}
)
// Provider端配置:
@DubboService(
    version = "1.0.0",
    group = "product",
    retries = 2,
    methods = {@Method(name = "testConcurrencyControlV2", executes = 5)}
)
</code></pre>
                                        </div>
                                    </span>
                                </div>
                            </div>

                            <!-- Result Display -->
                        </div>

                        <!-- 8. Load Balance Strategy Test -->
                        <div class="control-group" id="dubbo-loadbalance" v-show="activeSection === 'dubbo-loadbalance'">
                            <div class="control-label">负载均衡策略测试</div>
                            <div class="test-description">🔹 验证 Dubbo 负载均衡策略。Dubbo 提供多种负载均衡算法，包括随机、轮询、一致性哈希、最小活跃数、最短响应时间等，可根据业务场景选择合适的策略。</div>
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label" class="font-bold">负载均衡策略对比</span>
                                </div>
                                <table class="loadbalance-table">
                                    <thead>
                                        <tr>
                                            <th>算法</th>
                                            <th>特性</th>
                                            <th>备注</th>
                                            <th>配置值</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Weighted Random LoadBalance</td>
                                            <td>加权随机</td>
                                            <td>默认算法，默认权重相同</td>
                                            <td><code>random</code> (默认)</td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('random')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>RoundRobin LoadBalance</td>
                                            <td>加权轮询</td>
                                            <td>借鉴于 Nginx 的平滑加权轮询算法，默认权重相同</td>
                                            <td><code>roundrobin</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('roundrobin')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>LeastActive LoadBalance</td>
                                            <td>最少活跃优先 + 加权随机</td>
                                            <td>背后是能者多劳的思想</td>
                                            <td><code>leastactive</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('leastactive')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Shortest-Response LoadBalance</td>
                                            <td>最短响应优先 + 加权随机</td>
                                            <td>更加关注响应速度</td>
                                            <td><code>shortestresponse</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('shortestresponse')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ConsistentHash LoadBalance</td>
                                            <td>一致性哈希</td>
                                            <td>确定的入参，确定的提供者，适用于有状态请求</td>
                                            <td><code>consistenthash</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('consistenthash')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>P2C LoadBalance</td>
                                            <td>Power of Two Choice</td>
                                            <td>随机选择两个节点后，继续选择"连接数"较小的那个节点</td>
                                            <td><code>p2c</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('p2c')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Adaptive LoadBalance</td>
                                            <td>自适应负载均衡</td>
                                            <td>在 P2C 算法基础上，选择二者中 load 最小的那个节点</td>
                                            <td><code>adaptive</code></td>
                                            <td>
                                                <button class="table-detail-btn" @click="showStrategyDetails('adaptive')">
                                                    查看详情
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="input-row" class="align-center margin-top-20">
                                <label class="input-label">请求次数:</label>
                                <input class="input" v-model="loadBalanceRequestCount" type="number" min="1" max="100"
                                       placeholder="默认20" class="width-120">
                                <label class="input-label" class="margin-left-20">负载均衡策略:</label>
                                <select class="input" v-model="loadBalanceStrategy" class="flex-1 max-width-350">
                                    <option value="random">random（随机）- 按权重随机选择服务器</option>
                                    <option value="roundrobin">roundrobin（轮询）- 按权重轮询选择服务器</option>
                                    <option value="consistenthash">consistenthash（一致性哈希）- 相同参数的请求总是发送到同一台服务器</option>
                                    <option value="leastactive">leastactive（最小活跃数）- 选择活跃请求数最少的服务器</option>
                                    <option value="shortestresponse">shortestresponse（最短响应时间）- 选择响应时间最短的服务器</option>
                                </select>
                                <button class="btn btn-primary" @click="testLoadBalanceStrategy()" class="margin-left-12 flex-shrink-0"><span>▶</span>执行测试</button>
                            </div>

                            <div class="input-row" class="align-center" v-show="loadBalanceStrategy === 'consistenthash'">
                                <label class="input-label">产品ID:</label>
                                <input class="input" v-model="loadBalanceParam" type="number"
                                       placeholder="输入产品ID" class="flex-1 max-width-100">
                                <span class="test-description" class="margin-left-10"><img src="images/icons/lightbulb.svg" class="icon" alt="Lightbulb"> 一致性哈希策略测试时，使用此固定ID验证相同ID是否路由到同一服务器</span>
                            </div>

                            <!-- Result Display -->

                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/leastactive-test</span>
                                </div>
                            </div>

                            <div class="input-row">
                                <button class="btn btn-primary" @click="testDubboLeastActive()"><span>▶</span>最小并发数负载均衡测试
                                </button>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">最小并发数负载均衡:</span>
                                    <span class="config-value">
                                        配置服务的客户端的 loadbalance 属性为 leastactive，此 Loadbalance 会调用并发数最小的 Provider（Consumer端并发数）。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置示例:</span>
                                    <span class="config-value">
                                        <div class="code-block no-copy collapsible">
                                            <pre><code class="language-java">// 注解方式
@DubboReference(loadbalance = "leastactive")
private DemoService demoService;

// XML方式：
&lt;dubbo:reference interface="com.foo.BarService" loadbalance="leastactive" /&gt;</code></pre>
                                        </div>
                                    </span>
                                </div>
                            </div>

                            <!-- Result Display -->
                        </div>

                        <!-- 9. Filter Interceptor Test -->
                        <div class="control-group" id="dubbo-filter" v-show="activeSection === 'dubbo-filter'">
                            <div class="control-label">Filter 拦截器</div>
                            <div class="test-description">🔹 验证 Dubbo Filter 对请求和响应的动态拦截功能。Filter 可以在服务调用前后执行自定义逻辑，如日志记录、权限验证、参数校验等。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/filter-test?message={{dubboFilterMessage}}</span>
                                </div>
                            </div>
                            <div class="input-row">
                                <input class="input" v-model="dubboFilterMessage" type="text"
                                       placeholder="测试消息" class="width-200">
                                <button class="btn btn-primary" @click="testDubboFilter()"><span>▶</span> Filter测试
                                </button>
                            </div>

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">Filter 工作原理:</span>
                                    <span class="config-value">
                                        Dubbo Filter 是基于责任链模式的拦截器机制，在服务调用前后执行自定义逻辑。每个 Filter 都可以访问请求参数、返回值、异常信息等。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">拦截时机:</span>
                                    <span class="config-value">
                                        <strong>请求拦截:</strong> 在方法调用前，可以获取接口名、方法名、参数类型、参数值、远程地址等信息。<br>
                                        <strong>响应拦截:</strong> 在方法返回后，可以获取返回值、执行时间、异常信息等。
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">应用场景:</span>
                                    <span class="config-value">
                                        1. <strong>日志记录:</strong> 记录所有 RPC 调用的请求和响应信息<br>
                                        2. <strong>权限验证:</strong> 验证调用方是否有权限访问服务<br>
                                        3. <strong>参数校验:</strong> 在方法调用前校验参数合法性<br>
                                        4. <strong>性能监控:</strong> 统计方法调用时间和成功率<br>
                                        5. <strong>限流熔断:</strong> 实现自定义的限流和熔断逻辑
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置示例:</span>
                                    <span class="config-value">
                                        <div class="code-block no-copy collapsible">
                                            <pre><code class="language-java">// 自定义Filter实现类
@Slf4j
@Component
@Activate(group = {"provider", "consumer"})
public class DemoFilter implements Filter {
    @Override
    public Result invoke(Invoker<?> invoker, Invocation invocation) {
        long startTime = System.currentTimeMillis();
        
        // 请求拦截
        String interfaceName = invoker.getInterface().getName();
        String methodName = invocation.getMethodName();
        log.info("调用接口: {}, 方法: {}", interfaceName, methodName);
        
        try {
            // 执行实际调用
            Result result = invoker.invoke(invocation);
            
            // 响应拦截
            long duration = System.currentTimeMillis() - startTime;
            log.info("执行时间: {}ms, 返回值: {}", duration, result.getValue());
            
            return result;
        } catch (Exception e) {
            log.error("调用异常: {}", e.getMessage());
            throw e;
        }
    }
}</code></pre>
                                        </div>
                                    </span>
                                </div>
                            </div>

                            <!-- Result Display -->
                        </div>

                        <!-- 9. Version and Group Test -->
                        <div class="control-group" id="dubbo-version-group" v-show="activeSection === 'dubbo-version-group'">
                            <div class="control-label">版本与分组</div>
                            <div class="test-description">🔹 验证 Dubbo 版本与分组功能。通过版本号和分组可以实现服务的灰度发布、多版本共存、环境隔离等功能。</div>
                            
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">版本管理:</span>
                                    <span class="config-value">
                                        <strong>版本号:</strong> 通过 version 属性标识服务的不同版本，如 "1.0.0"、"2.0.0"<br>
                                        <strong>分组:</strong> 通过 group 属性将服务分组，如 "default"、"groupA"、"groupB"<br>
                                        <strong>组合使用:</strong> 版本号和分组可以组合使用，实现更精细的服务隔离
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">应用场景:</span>
                                    <span class="config-value">
                                        1. <strong>灰度发布:</strong> 新版本服务先部署到小部分节点，验证稳定后全量发布<br>
                                        2. <strong>多版本共存:</strong> 不同业务线使用不同版本的服务，互不影响<br>
                                        3. <strong>环境隔离:</strong> 开发、测试、生产环境使用不同的分组<br>
                                        4. <strong>A/B测试:</strong> 不同分组提供不同的服务实现，对比效果
                                    </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置示例:</span>
                                    <span class="config-value">
                                        <div class="code-block no-copy collapsible">
                                            <pre><code class="language-java">// 服务提供者 - 不同版本和分组
@DubboService(interfaceClass = IVersionGroupService.class, version = "1.0.0", group = "default")
public class VersionGroupServiceImplV1 implements IVersionGroupService { }

@DubboService(interfaceClass = IVersionGroupService.class, version = "2.0.0", group = "default")
public class VersionGroupServiceImplV2 implements IVersionGroupService { }

@DubboService(interfaceClass = IVersionGroupService.class, version = "1.0.0", group = "groupA")
public class VersionGroupServiceImplGroupA implements IVersionGroupService { }

// 服务消费者 - 引用特定版本和分组
@DubboReference(version = "1.0.0", group = "default", check = false)
private IVersionGroupService versionGroupServiceV1Default;

@DubboReference(version = "2.0.0", group = "default", check = false)
private IVersionGroupService versionGroupServiceV2Default;

@DubboReference(version = "1.0.0", group = "groupA", check = false)
private IVersionGroupService versionGroupServiceV1GroupA;</code></pre>
                                        </div>
                                    </span>
                                </div>
                            </div>

                            <div class="input-row">
                                <input class="input" v-model="dubboVersionGroupName" type="text"
                                       placeholder="测试名称" class="width-200">
                                <select class="input" v-model="dubboVersionGroupType" class="width-250">
                                    <option value="v1-default">v1.0.0 - 默认分组</option>
                                    <option value="v2-default">v2.0.0 - 默认分组</option>
                                    <option value="v1-groupA">v1.0.0 - 分组A</option>
                                    <option value="v1-groupB">v1.0.0 - 分组B</option>
                                    <option value="v2-groupA">v2.0.0 - 分组A</option>
                                    <option value="compare">对比所有版本和分组</option>
                                    <option value="group-merger">分组聚合（聚合所有分组）</option>
                                </select>
                                <button class="btn btn-primary" @click="testDubboVersionGroup()"><span>▶</span> 测试
                                </button>
                            </div>

                            <!-- Result Display -->
                        </div>

                        <!-- Protocol Comparison -->
                        <div class="control-group" id="protocol-compare" v-show="activeSection === 'protocol-compare'">
                            <div class="control-label">协议对比测试</div>
                            <div class="test-description">🔹 对比 Dubbo、Triple 和 REST 三种协议的性能表现，包括成功率和响应时间。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/dubbo/protocol/compare</span>
                                </div>
                            </div>
                            <div class="input-row">
                                <input class="input" v-model.number="dubboProductId" placeholder="产品ID" class="width-100">
                                <input class="input" v-model.number="compareTimes" placeholder="请求次数" class="width-100">
                            </div>
                            <button class="btn btn-primary" @click="testProtocolCompare()"><span>▶</span> 协议对比</button>
                            <!-- Result Display -->

                            <!-- Individual Protocol Tests -->
                            <div class="control-label">单协议测试</div>
                            <div class="test-description">🔹 单独测试每种协议的性能表现。</div>
                            <div class="input-row">
                                <input class="input" v-model.number="dubboProductId" placeholder="产品ID" class="width-100">
                            </div>
                            <div class="input-row">
                                <button class="btn btn-primary flex-1" @click="testProtocolDubbo()" :disabled="loadingStates['protocol-dubbo']"><span>▶</span> Dubbo协议</button>
                                <button class="btn btn-primary flex-1" @click="testProtocolTriple()" :disabled="loadingStates['protocol-triple']"><span>▶</span> Triple协议</button>
                                <button class="btn btn-primary flex-1" @click="testProtocolRest()" :disabled="loadingStates['protocol-rest']"><span>▶</span> REST协议</button>
                            </div>
                            <!-- Dubbo Protocol Result -->
                            <!-- Triple Protocol Result -->
                            <!-- REST Protocol Result -->
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- RocketMQ Controls -->
                    <div v-if="activeComponent === 'rocketmq'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="rocketmq-business-chain" v-show="activeSection === 'rocketmq-business-chain'">
                            <div class="control-label">订单链路 10 场景演练</div>
                            <div class="test-description">🔹 按真实企业订单链路组织：异步解耦 -> 失败重试 -> 死信治理 -> 幂等 -> 顺序 -> 延迟关单 -> 事务消息 -> 回查 -> Tag过滤 -> 死信重放。</div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 前缀:</span>
                                    <span class="config-value api-address-value">/api/order/demo/rocketmq/*</span>
                                </div>
                            </div>

                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">01 普通消息</div>
                                        <span class="scenario-chip">异步解耦</span>
                                    </div>
                                    <div class="scenario-desc">下单后异步通知库存和营销，模拟生产消费闭环。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqPublishBasic()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">02 消费重试</div>
                                        <span class="scenario-chip">失败恢复</span>
                                    </div>
                                    <div class="scenario-desc">模拟前两次失败第三次成功，验证重试轨迹。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqRetry()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">03 死信队列</div>
                                        <span class="scenario-chip">故障隔离</span>
                                    </div>
                                    <div class="scenario-desc">重试耗尽转入 DLQ，避免阻塞正常消费。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqDlq()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">04 幂等消费</div>
                                        <span class="scenario-chip">防重复</span>
                                    </div>
                                    <div class="scenario-desc">同 messageKey 重复投递仅第一次生效。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqIdempotent()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">05 顺序消息</div>
                                        <span class="scenario-chip">局部有序</span>
                                    </div>
                                    <div class="scenario-desc">同订单状态按 CREATED->PAID->SHIPPED 顺序消费。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqOrderly()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">06 延迟关单</div>
                                        <span class="scenario-chip">定时触发</span>
                                    </div>
                                    <div class="scenario-desc">模拟未支付订单超时后自动关闭。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqDelayClose()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">07 事务发送</div>
                                        <span class="scenario-chip">最终一致</span>
                                    </div>
                                    <div class="scenario-desc">本地事务成功后提交半消息。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqTxSend()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">08 事务回查</div>
                                        <span class="scenario-chip">状态确认</span>
                                    </div>
                                    <div class="scenario-desc">Broker 回查生产端事务状态并给出决策。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqTxCheck()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">09 Tag过滤</div>
                                        <span class="scenario-chip">多下游订阅</span>
                                    </div>
                                    <div class="scenario-desc">库存与营销消费者按 Tag 路由过滤消息。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqTagFilter()"><span>▶</span> 运行</button></div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">10 死信重放</div>
                                        <span class="scenario-chip">补偿恢复</span>
                                    </div>
                                    <div class="scenario-desc">DLQ 消息人工触发重放并记录补偿结果。</div>
                                    <div class="scenario-actions"><button class="btn btn-primary" @click="testRocketMqReplayDlq()"><span>▶</span> 运行</button></div>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Seata Controls -->
                    <div v-if="activeComponent === 'seata'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="process-flow">
                            <div class="flow-title"><img src="images/icons/refresh.svg" class="icon" alt="Refresh"> Seata TCC 分布式事务流程</div>
                            <div class="flow-diagram">1. Try: 业务服务预保留资源（锁库存、锁账户）
                                2. Confirm: 全部服务预保留成功后，事务提交，真正执行业务
                                3. Cancel: 业务服务发生失败，恢复所有资源，数据不回滚，只回滚业务级字段
                            </div>
                        </div>
                        <div class="control-group" id="seata-tcc">
                            <div class="control-label">TCC 事务模式</div>
                            <div class="test-description">🔹 TCC 保证强一致性，但需业业服务实现 Try/Confirm/Cancel
                                三个接口。适合对一致性要求高的业务场景。
                            </div>
                            <div class="input-row">
                                <input class="input" v-model="tccCommodityCode" placeholder="商品编码">
                                <input class="input" type="number" v-model.number="tccCount" placeholder="数量"
                                       class="width-60">
                            </div>
                            <div class="input-row">
                                <button class="btn btn-primary flex-1"
                                        @click="callWithResultDisplay(endpoint('tcc-ok'),'tcc-ok', 'seata-tcc-ok')">
                                    <span>▶</span>
                                    提交事务
                                </button>
                                <button class="btn btn-danger flex-1"
                                        @click="callWithResultDisplay(endpoint('tcc-fail'),'tcc-fail', 'seata-tcc-fail')">
                                    <span>▶</span>
                                    回滚事务
                                </button>
                            </div>

                            <!-- Result Display for TCC Test -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">事务模式:</span>
                                    <span class="config-value">TCC (强一致)</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">参与治理方式:</span>
                                    <span class="config-value">Seata Server</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">超时设置:</span>
                                    <span class="config-value">300s</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gateway Controls -->
                    <div v-if="activeComponent === 'gateway'">
                        <div class="control-group" id="higress-routing">
                            <div class="control-label">网关路由</div>
                            <div class="test-description">🔹
                                检查 Spring Cloud Gateway 路由规则配置，验证路由是否正常工作。包含动态路由、负载均衡等配置。
                            </div>
                            <button class="btn btn-primary mb-2" @click="testGatewayRouting()"><span>▶</span>
                                检查路由规则
                            </button>

                            <!-- Result Display for Gateway Routing Test -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">网关类型:</span>
                                    <span class="config-value">Spring Cloud Gateway</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">路由模式:</span>
                                    <span class="config-value">Predicate 匹配、Filter 过滤</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="control-label">过滤器测试</div>
                            <div class="test-description">🔹
                                测试 Gateway 过滤器功能，包括请求头修改、路径重写等。
                            </div>
                            <div class="input-row">
                                <button class="btn btn-primary flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-pass'),'gateway-auth', 'gateway-auth-pass')">
                                    <span>▶</span>
                                    认证通过
                                </button>
                                <button class="btn btn-danger flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-fail'),'gateway-auth', 'gateway-auth-fail')">
                                    <span>▶</span>
                                    认证拒绝
                                </button>
                            </div>

                            <!-- Result Display for Auth Tests -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">鉴权方式:</span>
                                    <span class="config-value">Header Authorization</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Higress Controls -->
                    <div v-if="activeComponent === 'higress'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="higress-routing">
                            <div class="control-label">网关路由</div>
                            <div class="test-description">🔹
                                检查网关路由规则配置，验证路由是否正常工作。包含传递模式、负载均衡等配置。
                            </div>
                            <button class="btn btn-primary mb-2" @click="testGatewayRouting()"><span>▶</span>
                                检查路由规则
                            </button>

                            <!-- Result Display for Gateway Routing Test -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">网关类型:</span>
                                    <span class="config-value">Higress (Envoy 基础)</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">路由模式:</span>
                                    <span class="config-value">加权轮询、Random</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" id="higress-auth">
                            <div class="control-label">安全鉴权</div>
                            <div class="test-description">🔹
                                测试鉴权一行，模拟认可的请求与不认可的请求。验证模型是否正常工作。
                            </div>
                            <div class="input-row">
                                <button class="btn btn-primary flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-pass'),'gateway-auth', 'higress-auth-pass')">
                                    <span>▶</span>
                                    鉴权通过
                                </button>
                                <button class="btn btn-danger flex-1"
                                        @click="callWithResultDisplay(endpoint('gateway-auth-fail'),'gateway-auth', 'higress-auth-fail')">
                                    <span>▶</span>
                                    鉴权拒绝
                                </button>
                            </div>

                            <!-- Result Display for Auth Tests -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">身份验证:</span>
                                    <span class="config-value">JWT Token</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">鉴权方式:</span>
                                    <span class="config-value">Header Authorization</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- SCA Controls -->
                    <div v-if="activeComponent === 'sca'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="sca-feign">
                            <div class="control-label">OpenFeign REST 调用</div>
                            <div class="test-description">
                                🔹 展示 OpenFeign 的完整功能,包括负载均衡、熔断降级、超时控制、性能监控等,提供更全面的调用信息。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/feign/call-enhanced</span>
                                </div>
                            </div>
                            <div class="input-row">
                                <input class="input" type="number" v-model.number="feignProductId"
                                       placeholder="商品ID">
                                <button class="btn btn-primary" @click="testFeignEnhanced('normal')"><span>▶</span>
                                    正常调用
                                </button>
                                <button class="btn btn-danger" @click="testFeignEnhanced('error')"><span>▶</span>
                                    模拟失败
                                </button>
                                <button class="btn btn-warning" @click="testFeignEnhanced('degrade')"><span>▶</span>
                                    模拟超时降级
                                </button>
                            </div>

                            <!-- Result Display for OpenFeign Enhanced -->

                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">参数含义:</span>
                                    <span class="config-value">productId: 商品ID (99999=模拟失败, 88888=模拟降级)</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">功能集成:</span>
                                    <span class="config-value">负载均衡+熔断+超时</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">降级策略:</span>
                                    <span class="config-value">返回默认商品</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">性能监控:</span>
                                    <span class="config-value">自动记录调用耗时</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" id="sca-loadbalance">
                            <div class="control-label">LoadBalancer 负载均衡</div>
                            <div class="test-description">
                                🔹 Spring Cloud LoadBalancer 是一个轻量级、响应式友好的客户端负载均衡器，用于在调用远程服务时，从服务注册中心（如
                                Eureka、Nacos、Consul）获取可用实例列表，并根据策略选择一个实例进行请求
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/load-balance</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testLoadBalance()"><span>▶</span>
                                测试负载均衡策略
                            </button>

                            <!-- Result Display for Load Balance -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">方案:</span>
                                    <span class="config-value">默认轮询（Round Robin）</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">如何启用:</span>
                                    <span class="config-value">
                                            在pom中配置spring-cloud-starter-loadbalancer
                                        </span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" id="sca-timeout">
                            <div class="control-label">超时与重试机制</div>
                            <div class="test-description">
                                🔹 配置连接超时和读取超时,防止服务调用长时间阻塞。支持自定义重试策略,但需注意幂等性问题。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/timeout-retry</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testTimeoutRetry()"><span>▶</span>
                                测试超时机制
                            </button>

                            <!-- Result Display for Timeout Retry -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">超时配置:</span>
                                    <div class="config-value">
                                        <div class="code-block no-copy collapsible">
                                                <pre><code class="language-yaml">spring:
  cloud:
    openfeign:
      client:
        config:
          # 默认配置
          default:
            logger-level: full
            connect-timeout: 1000
            read-timeout: 2000
          # 具体 feign 客户端的超时配置
          service-product:
            logger-level: full
            connect-timeout: 3000
            read-timeout: 4000
</code></pre>
                                        </div>
                                    </div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">重试策略:</span>
                                    <span class="config-value">默认不重试</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置位置:</span>
                                    <div class="config-value">
                                        <div class="code-block no-copy collapsible">
                                                <pre><code class="language-java">@Configuration
public class ProductServiceConfig {
    @Bean
    public Retryer retryer() {
        return new Retryer.Default(100, 1000, 3);
    }
}</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" id="sca-interceptor">
                            <div class="control-label">请求拦截器</div>
                            <div class="test-description">
                                🔹 Feign 拦截器可统一处理请求头、认证信息、日志记录、性能监控等横切关注点,实现 AOP 功能。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/feign-interceptor</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testFeignInterceptor()"><span>▶</span>
                                测试拦截器
                            </button>

                            <!-- Result Display for Feign Interceptor -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">功能:</span>
                                    <span class="config-value">添加 Token、日志、追踪ID</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置方式-全局生效:</span>
                                    <span class="config-value">
                                            <div class="code-block no-copy collapsible">
                                                <pre><code class="language-java">@Component
public class XTokenRequestInterceptor implements RequestInterceptor {
    @Override
    public void apply(RequestTemplate template) {
        System.out.println("XTokenRequestInterceptor ...");
        template.header("X-Token", UUID.randomUUID().toString());
    }
}
</code></pre>
                                            </div>
                                        </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">配置方式-特定服务生效:</span>
                                    <span class="config-value">
                                            <div class="code-block no-copy collapsible">
                                                <pre><code class="language-java">spring:
  cloud:
    openfeign:
      client:
        config:
          service-product:
            # 该请求拦截器仅对当前客户端有效
            request-interceptors:
              - indi.mofan.order.interceptor.XTokenRequestInterceptor
</code></pre>
                                            </div>
                                        </span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">应用场景:</span>
                                    <span class="config-value">认证、监控、链路追踪</span>
                                </div>
                            </div>
                        </div>

                        <div class="control-group" id="sca-config">
                            <div class="control-label">配置动态刷新</div>
                            <div class="test-description">
                                🔹 通过 Nacos 配置中心和 @RefreshScope 注解,实现配置的动态刷新,无需重启应用即可生效。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/config-refresh</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testConfigRefresh()"><span>▶</span>
                                查看当前配置
                            </button>

                            <!-- Result Display for Config Refresh -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">配置来源:</span>
                                    <span class="config-value">Nacos (common.yaml)</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">刷新机制:</span>
                                    <span class="config-value">@RefreshScope 自动刷新</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Nacos 地址:</span>
                                    <span class="config-value">http://localhost:8848/nacos</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">验证方法:</span>
                                    <span class="config-value">修改 Nacos 配置后刷新</span>
                                </div>
                            </div>
                        </div>

                        <div class="control-group" id="sca-health">
                            <div class="control-label">服务健康检查</div>
                            <div class="test-description">
                                🔹 通过 Spring Boot Actuator 和 Nacos 健康检查机制,实时监控服务实例状态,自动剔除不健康实例。
                            </div>
                            <div class="config-panel api-address-panel">
                                <div class="config-item api-address-item">
                                    <span class="config-label">📍 API 地址:</span>
                                    <span class="config-value api-address-value">GET
                                            /api/order/demo/health-check</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" @click="testHealthCheck()"><span>▶</span>
                                检查服务健康
                            </button>

                            <!-- Result Display for Health Check -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">健康端点:</span>
                                    <span class="config-value">/actuator/health</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">检查机制:</span>
                                    <span class="config-value">Nacos 定期心跳检测</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">自动剔除:</span>
                                    <span class="config-value">不健康实例自动下线</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">优雅下线:</span>
                                    <span class="config-value">/actuator/shutdown</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- OpenTelemetry Controls -->
                    <div v-if="activeComponent === 'opentelemetry'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <div class="control-group" id="opentelemetry-tracing">
                            <div class="control-label">分布式互追 Trace</div>
                            <div class="test-description">🔹
                                生成模拟的应用链路数据，展示路迷液中的各个谢拒的执行流程、时间消耗、业务参数等。
                            </div>
                            <button class="btn btn-primary" @click="testTracing()"><span>▶</span> 生成模拟链路数据
                            </button>

                            <!-- Result Display for Tracing -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">Trace 采样率:</span>
                                    <span class="config-value">100% (demo 模式)</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Trace 最大事件:</span>
                                    <span class="config-value">1024</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">后端接口:</span>
                                    <span class="config-value">Jaeger/Skywalking</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Redis Controls -->
                    <div v-if="activeComponent === 'redis'">
                        <div class="console-content-wrapper">
                            <div class="console-content-main">

                        <!-- 1. 基础数据结构操作测试 -->
                        <div class="control-group" id="redis-data-structures" v-show="activeSection === 'redis-data-structures'">
                            <div class="control-label">基础数据结构操作</div>
                            <div class="test-description">🔹
                                测试Redis五种基本数据结构（String、Hash、List、Set、ZSet）的操作和特性，展示底层实现原理。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">String 操作</div>
                                        <span class="scenario-chip">基础值类型</span>
                                    </div>
                                    <div class="scenario-desc">适合缓存短文本与计数器场景，支持自增/自减、位图、GETSET 等原子指令。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisString()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">Hash 操作</div>
                                        <span class="scenario-chip">对象字段</span>
                                    </div>
                                    <div class="scenario-desc">面向对象字段存取，适合用户资料、商品属性等小对象缓存，支持 HINCRBY 等局部更新。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisHash()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">List 操作</div>
                                        <span class="scenario-chip">队列/栈</span>
                                    </div>
                                    <div class="scenario-desc">双向链表结构，适合消息队列、时间线等顺序场景，支持 LPUSH/RPOP 与阻塞弹出。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisList()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">Set 操作</div>
                                        <span class="scenario-chip">无序去重</span>
                                    </div>
                                    <div class="scenario-desc">天然去重，支持交并差运算，适合标签系统、共同好友、抽奖去重等集合场景。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisSet()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">ZSet 操作</div>
                                        <span class="scenario-chip">排序权重</span>
                                    </div>
                                    <div class="scenario-desc">跳表 + 哈希结构，按分数排序，适合排行榜、延迟队列与区间统计等场景。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisZSet()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">String最大512MB，二进制安全；Hash适合存储对象；List基于链表O(1)头尾操作；Set基于哈希表O(1)查找；ZSet基于跳表O(log n)范围查询</span>
                                </div>
                            </div>
                        </div>

                        <!-- 2. 分布式锁实现测试 -->
                        <div class="control-group" id="redis-distributed-lock" v-show="activeSection === 'redis-distributed-lock'">
                            <div class="control-label">分布式锁实现</div>
                            <div class="test-description">🔹
                                验证Redis实现分布式锁的正确性和可靠性，包括可重入锁、锁续期和RedLock算法。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">基础分布式锁</div>
                                        <span class="scenario-chip">互斥保障</span>
                                    </div>
                                    <div class="scenario-desc">使用 SET NX PX 获取/释放锁，验证互斥与超时释放机制。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisBasicLock()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">可重入锁</div>
                                        <span class="scenario-chip">可重入</span>
                                    </div>
                                    <div class="scenario-desc">同一业务标识可重复加锁，计数器保证退出对称。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisReentrantLock()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">锁续期</div>
                                        <span class="scenario-chip">watchdog</span>
                                    </div>
                                    <div class="scenario-desc">任务耗时过长时自动续期，避免锁提前过期。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisLockRenewal()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">RedLock 算法</div>
                                        <span class="scenario-chip">多节点</span>
                                    </div>
                                    <div class="scenario-desc">多实例多数派加锁，提高可用性与抗单点故障能力。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisRedLock()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">SETNX实现互斥；过期时间防止死锁；Watchdog续期解决业务超时；RedLock解决单点故障</span>
                                </div>
                            </div>
                        </div>

                        <!-- 3. 缓存预热与穿透/击穿/雪崩测试 -->
                        <div class="control-group" id="redis-cache-issues" v-show="activeSection === 'redis-cache-issues'">
                            <div class="control-label">缓存问题解决方案</div>
                            <div class="test-description">🔹
                                验证Redis缓存常见问题（穿透、击穿、雪崩）的解决方案。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">缓存预热</div>
                                        <span class="scenario-chip">热数据</span>
                                    </div>
                                    <div class="scenario-desc">启动时批量加载热点 key，缩短首批访问延迟。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisCacheWarmup()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">缓存穿透</div>
                                        <span class="scenario-chip">穿透防护</span>
                                    </div>
                                    <div class="scenario-desc">空值缓存 + 布隆过滤器拦截不存在数据请求。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisCachePenetration()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">缓存击穿</div>
                                        <span class="scenario-chip">击穿保护</span>
                                    </div>
                                    <div class="scenario-desc">互斥锁或逻辑过期，避免热点 key 同时失效。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisCacheBreakdown()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">缓存雪崩</div>
                                        <span class="scenario-chip">雪崩缓解</span>
                                    </div>
                                    <div class="scenario-desc">过期时间随机化 + 限流降级，减少集中失效。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisCacheAvalanche()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">穿透：缓存空值+布隆过滤器；击穿：互斥锁+逻辑过期；雪崩：随机过期时间+高可用</span>
                                </div>
                            </div>
                        </div>

                        <!-- 4. 限流计数器测试 -->
                        <div class="control-group" id="redis-rate-limit" v-show="activeSection === 'redis-rate-limit'">
                            <div class="control-label">限流计数器</div>
                            <div class="test-description">🔹
                                验证Redis实现限流算法（固定窗口、滑动窗口、令牌桶、漏桶）的准确性。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">固定窗口</div>
                                        <span class="scenario-chip">简单计数</span>
                                    </div>
                                    <div class="scenario-desc">固定时间窗口计数，易实现但存在临界突刺。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisFixedWindow()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">滑动窗口</div>
                                        <span class="scenario-chip">平滑统计</span>
                                    </div>
                                    <div class="scenario-desc">滑动窗口滚动计数，缓解临界问题更平滑。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisSlidingWindow()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">令牌桶</div>
                                        <span class="scenario-chip">弹性放行</span>
                                    </div>
                                    <div class="scenario-desc">按固定速率补充令牌，允许突发流量。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisTokenBucket()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">漏桶</div>
                                        <span class="scenario-chip">恒定速率</span>
                                    </div>
                                    <div class="scenario-desc">以固定速率出队，稳定处理吞吐。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisLeakyBucket()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">固定窗口有临界问题；滑动窗口解决临界问题；令牌桶平滑限流；漏桶固定速率处理</span>
                                </div>
                            </div>
                        </div>

                        <!-- 5. Pipeline批量操作测试 -->
                        <div class="control-group" id="redis-pipeline" v-show="activeSection === 'redis-pipeline'">
                            <div class="control-label">Pipeline批量操作</div>
                            <div class="test-description">🔹
                                验证Pipeline对性能的提升效果，减少网络往返次数。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">Pipeline 性能测试</div>
                                        <span class="scenario-chip">批量命令</span>
                                    </div>
                                    <div class="scenario-desc">批量发送命令减少 RTT，观察吞吐和延迟提升。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisPipeline()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">Pipeline减少网络RTT；批量发送命令；Pipeline大小需要优化；非原子性执行</span>
                                </div>
                            </div>
                        </div>

                        <!-- 6. 事务与Lua脚本测试 -->
                        <div class="control-group" id="redis-transaction" v-show="activeSection === 'redis-transaction'">
                            <div class="control-label">事务与Lua脚本</div>
                            <div class="test-description">🔹
                                验证Redis事务和Lua脚本的原子性，以及WATCH乐观锁机制。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">事务测试</div>
                                        <span class="scenario-chip">MULTI/EXEC</span>
                                    </div>
                                    <div class="scenario-desc">事务队列一次性提交，保障指令顺序执行。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisTransaction()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">乐观锁</div>
                                        <span class="scenario-chip">WATCH</span>
                                    </div>
                                    <div class="scenario-desc">监测 key 变更，冲突时回滚重试。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisWatch()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">Lua 脚本</div>
                                        <span class="scenario-chip">原子执行</span>
                                    </div>
                                    <div class="scenario-desc">脚本内多命令原子执行，减少往返调用。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisLua()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">Redis事务不保证ACID；WATCH实现乐观锁；Lua脚本原子执行；脚本超时和内存限制</span>
                                </div>
                            </div>
                        </div>

                        <!-- 7. 发布订阅测试 -->
                        <div class="control-group" id="redis-pubsub" v-show="activeSection === 'redis-pubsub'">
                            <div class="control-label">发布订阅</div>
                            <div class="test-description">🔹
                                验证Redis发布订阅机制，包括基础订阅和模式订阅。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">发布订阅测试</div>
                                        <span class="scenario-chip">频道</span>
                                    </div>
                                    <div class="scenario-desc">基础频道订阅发布，观察消息广播。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisPubSub()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">模式订阅</div>
                                        <span class="scenario-chip">通配符</span>
                                    </div>
                                    <div class="scenario-desc">按模式匹配订阅，验证多频道分发。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisPatternPubSub()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">发布订阅无持久化；消息可能丢失；模式订阅支持通配符；不适合可靠消息队列</span>
                                </div>
                            </div>
                        </div>

                        <!-- 8. 持久化与性能监控测试 -->
                        <div class="control-group" id="redis-persistence" v-show="activeSection === 'redis-persistence'">
                            <div class="control-label">持久化与性能监控</div>
                            <div class="test-description">🔹
                                验证Redis持久化机制（RDB、AOF）和性能监控。
                            </div>
                            <div class="redis-scenario-grid">
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">RDB 持久化</div>
                                        <span class="scenario-chip">快照</span>
                                    </div>
                                    <div class="scenario-desc">定期生成快照文件，评估恢复速度与数据丢失窗口。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisRDB()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">AOF 持久化</div>
                                        <span class="scenario-chip">日志</span>
                                    </div>
                                    <div class="scenario-desc">追加写日志更完整，观察文件膨胀与重写效果。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisAOF()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                                <div class="redis-scenario-card">
                                    <div class="scenario-header">
                                        <div class="scenario-title">性能监控</div>
                                        <span class="scenario-chip">运行指标</span>
                                    </div>
                                    <div class="scenario-desc">INFO/SLOWLOG/MONITOR 指标查看性能瓶颈。</div>
                                    <div class="scenario-actions">
                                        <button class="btn btn-primary" @click="testRedisMonitor()"><span>▶</span> 测试</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Display -->
                            <div class="config-panel">
                                <div class="config-item">
                                    <span class="config-label">面试点:</span>
                                    <span class="config-value">RDB快照文件小但可能丢失数据；AOF数据完整但文件大；混合持久化最佳；INFO/SLOWLOG/MONITOR监控</span>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Right: Terminal Output -->
            <div class="panel panel-no-border forge-terminal-panel">
                <div class="terminal">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <div class="dot dot-red"></div>
                            <div class="dot dot-yellow"></div>
                            <div class="dot dot-green"></div>
                        </div>
                        <div class="terminal-title">user@dev-console:~/logs</div>
                        <div class="flex-1"></div>
                        <button class="btn btn-sm terminal-clear-btn" @click="reset">
                            <img src="images/icons/trash.svg" class="icon" alt="Trash"> Clear
                        </button>
                    </div>
                    <div class="terminal-body" id="terminal-body">
                        <div v-if="history.length === 0"
                             class="text-secondary-center">
                            // Waiting for commands...<br>
                            // Click buttons on the left to execute tests.
                        </div>
                        <div class="log-entry" v-for="item in history" :key="item.id">
                            <div class="log-time">[{{ item.time }}]</div>
                            <div class="log-type">{{ item.type }}</div>
                            <div class="log-status" :class="item.status === '成功' ? 'success' : 'error'">
                                {{ item.status === '成功' ? '✔' : '✘' }}
                            </div>
                            <div class="log-content" @click="viewDetail(item)">
                                <div class="log-line">
                                    <span class="log-msg">{{ item.msg }}</span>
                                    <span class="log-meta">{{ item.rt }}ms</span>
                                    <span class="log-meta">HTTP {{ item.code }}</span>
                                    <span class="log-endpoint" v-if="item.endpoint">API {{ item.endpoint }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>
    </div>

    <!-- Detail Modal -->
    <div class="modal-overlay" v-cloak v-if="showDetailModal" @click.self="showDetailModal=false">
        <div class="modal">
            <div class="modal-header">
                <h3 class="title-h3">Response Details</h3>
                <button class="btn btn-sm" @click="showDetailModal=false">Close</button>
            </div>
            <div class="modal-body">
                <pre class="code-block" id="json-display"></pre>
            </div>
        </div>
    </div>

    <!-- 负载均衡策略详情模态框 -->
    <div class="modal-overlay" v-cloak v-if="showStrategyModal" @click.self="closeStrategyModal()">
        <div class="modal strategy-modal">
            <div class="modal-header">
                <h3 class="title-h3-large">{{ currentStrategyDetails?.title }}</h3>
                <button class="btn btn-sm" @click="closeStrategyModal()">关闭</button>
            </div>
            <div class="modal-body">
                <div v-if="currentStrategyDetails" class="strategy-details">
                    <div v-for="(section, index) in currentStrategyDetails.sections" :key="index" class="strategy-section">
                        <h4 class="strategy-section-title">{{ section.label }}：</h4>
                        <div class="strategy-section-content" v-html="section.content"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 回到顶部按钮 -->
    <button class="back-to-top" v-show="showBackToTop" @click="scrollToTop" title="回到顶部">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
    </button>
</div>

<script type="module" src="js/service-demo.js?v=20231222"></script>
</body>

</html>






